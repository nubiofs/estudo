<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

	<bean id="messageSource"
		class="org.springframework.context.support.ResourceBundleMessageSource">
		<property name="basename" value="messages" />
	</bean>
	
	<bean id="infraBean" class="br.gov.serpro.supde.infra.batch.admin.web.resources.InfraBean" />
	
	<bean id="standard" parent="parentLayout">
		<property name="url" value="/layouts/html/standard.ftl" />
		<property name="contentType" value="text/html;charset=UTF-8" />
		<property name="attributes">
			<props merge="true">
				<prop key="body">/layouts/html/infra-home.ftl</prop>
				<!-- Matches the prefix of the servlet mapping in web.xml -->
				<prop key="servletPath">#{resourceService.servletPath}</prop>
			</props>
		</property>
	</bean>
	
	<!-- freemarker config -->
	<bean id="freemarkerConfig" class="org.springframework.batch.admin.web.freemarker.HippyFreeMarkerConfigurer">
		<property name="templateLoaderPaths" value="/WEB-INF/web,classpath:/org/springframework/batch/admin/web,classpath:/br/gov/serpro/supde/infra/batch/admin/web" />
		<!-- TODO: find a way to switch this on for some template paths and not others -->
		<property name="preferFileSystemAccess" value="false" />
		<property name="freemarkerVariables">
			<map>
				<entry key="menuManager" value-ref="menuManager" />
				<entry key="infraBean" value-ref="infraBean" />
			</map>
		</property>
		<property name="freemarkerSettings">
			<props>
				<prop key="default_encoding">UTF-8</prop>
				<prop key="output_encoding">UTF-8</prop>
			</props>
		</property>
	</bean>
	
	<bean name="files" parent="desabilitado"/>

	<bean name="configuration" parent="desabilitado"/>
	
	<bean name="desabilitado" parent="standard">
		<property name="attributes">
			<props merge="true">
				<prop key="body">/manager/files/html/infra-desabilitado.ftl</prop>
				<prop key="titleCode">desabilitado.title</prop>
				<prop key="titleText">INFRA Batch Admin: Opção desabilitada</prop>
			</props>
		</property>
	</bean>
	
</beans>