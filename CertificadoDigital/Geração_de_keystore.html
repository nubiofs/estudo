<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="pt-br" dir="ltr" lang="pt-br"><head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
				<meta name="keywords" content="Geração de keystore">
		<link rel="shortcut icon" href="http://himalaia.bhe.serpro/favicon.ico">
		<link rel="search" type="application/opensearchdescription+xml" href="http://himalaia.bhe.serpro/wiki/opensearch_desc.php" title="Supst (Português do Brasil)">
		<link title="Creative Commons" type="application/rdf+xml" href="http://himalaia.bhe.serpro/wiki/index.php?title=Gera%C3%A7%C3%A3o_de_keystore&amp;action=creativecommons" rel="meta">
		<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
		<title>Geração de keystore - Supst</title>
		<style type="text/css" media="screen, projection">/*<![CDATA[*/
			@import "/wiki/skins/common/shared.css?97";
			@import "/wiki/skins/monobook/main.css?97";
		/*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="Gera%C3%A7%C3%A3o_de_keystore_arquivos/commonPrint.css">
		<!--[if lt IE 5.5000]><style type="text/css">@import "/wiki/skins/monobook/IE50Fixes.css?97";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/wiki/skins/monobook/IE55Fixes.css?97";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/wiki/skins/monobook/IE60Fixes.css?97";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/wiki/skins/monobook/IE70Fixes.css?97";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/wiki/skins/common/IEFixes.js?97"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		
		<script type="text/javascript">/*<![CDATA[*/
var skin = "monobook";
var stylepath = "/wiki/skins";
var wgArticlePath = "/wiki/index.php/$1";
var wgScriptPath = "/wiki";
var wgScript = "/wiki/index.php";
var wgServer = "http://himalaia.bhe.serpro";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "Geração_de_keystore";
var wgTitle = "Geração de keystore";
var wgAction = "view";
var wgRestrictionEdit = [];
var wgRestrictionMove = [];
var wgArticleId = "2006";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "pt-br";
var wgContentLanguage = "pt-br";
var wgBreakFrames = false;
var wgCurRevisionId = "53772";
/*]]>*/</script>
                
		<script type="text/javascript" src="Gera%C3%A7%C3%A3o_de_keystore_arquivos/wikibits.js"><!-- wikibits js --></script>
		<script type="text/javascript" src="Gera%C3%A7%C3%A3o_de_keystore_arquivos/index.php"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "/wiki/index.php?title=MediaWiki:Common.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "/wiki/index.php?title=MediaWiki:Monobook.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "/wiki/index.php?title=-&action=raw&gen=css&maxage=18000";
/*]]>*/</style>
		<!-- Head Scripts -->
		<script type="text/javascript" src="Gera%C3%A7%C3%A3o_de_keystore_arquivos/ajax.js"></script>
	</head>
<body class="mediawiki ns-0 ltr page-Geração_de_keystore">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 class="firstHeading">Geração de keystore</h1>
		<div id="bodyContent">
			<h3 id="siteSub">De Supst</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Ir para: <a href="#column-one">navegação</a>, <a href="#searchInput">pesquisa</a></div>			<!-- start content -->
			<a name="Gera.C3.A7.C3.A3o_de_Keystore_de_Homologa.C3.A7.C3.A3o_via.C2.A0https:.2F.2Fccdhom.serpro.gov.br.2Fserproacf.2F"></a><h1> <span class="mw-headline"> <b>Geração de Keystore de Homologação via&nbsp;</b><a href="https://ccdhom.serpro.gov.br/serproacf/" class="external text" title="https://ccdhom.serpro.gov.br/serproacf/" rel="nofollow"><b>https://ccdhom.serpro.gov.br/serproacf/</b></a>  </span></h1>
<p>1. Importar cadeias da AC de Homologação do Serpro 
</p><p>- Descompactar o zip disponível em:&nbsp;<a href="http://himalaia.bhe.serpro/wiki/images/2/20/Registra-ca-homologacao.zip" class="external text" title="http://himalaia.bhe.serpro/wiki/images/2/20/Registra-ca-homologacao.zip" rel="nofollow">registra-ca-homologacao.zip</a> 
</p><p>- Editar variável do script "registra CAs Serpro.sh" disponível no zip:&nbsp;JAVA_HOME com o caminho completo do java. 
</p><p>- Executar script "registra CAs Serpro.sh" <br> 
</p><p><br> 
</p><p>2. Gerar o Keystore (arquivo JKS) e a requisição (arquivo .pem) 
</p><p>Através do script&nbsp;<a href="http://himalaia.bhe.serpro/wiki/images/e/eb/Make-requisicao-certificado-homologacao-equipamento-antes.sh" class="external text" title="http://himalaia.bhe.serpro/wiki/images/e/eb/Make-requisicao-certificado-homologacao-equipamento-antes.sh" rel="nofollow">make-requisicao-certificado-homologacao-equipamento-antes.sh</a>&nbsp;deve-se gerar o par de chaves dentro de um keystore e a requisição dentro do arquivo pem, 
</p><p>para isso deve-se configurar as 6 variáveis disponíveis no script. 
</p><p><br> 
</p><p>3. Solicitar o Certificado Digital através do site <a href="https://certificadoshom.serpro.gov.br/arserpro/" class="external text" title="https://certificadoshom.serpro.gov.br/arserpro/" rel="nofollow">certificadoshom</a> 
</p><p>- Ir em: <b>Meu Certificado -&gt; Solicitar</b> 
</p><p>- Entre as opções que aparecem, clique em <b>Equipamento</b>; 
</p><p>- Nas sub-opções, escolha <b>Certificado de Equipamento A1 - R$ XXX.xx</b>
</p><p>- Preencha os dados para a liberação.
</p><p>3.1 Para a liberação do certificado digital deve-se entrar em contato com <b>SUPOP</b><br> 
</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Contato RJO: CCD (#21-3611)<br> 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; jaime.santos-oliveira@serpro.gov.br ou raphael.carvalho@serpro.gov.br<br>
</p><p><br> 
</p><p>4. Finalizar o Keystore com o retorno do CcdHom 
</p><p>- No Site do CcdHom, clicar em Baixar Certificado e digitar as 
informações solicitadas... Caso o Certificado digital não esteja pronto,
 será informado.&nbsp;Caso contrário copie o conteúdo exibido em um 
arquivo chamado newcert.pem no mesmo diretório onde a keystore foi 
gerada. 
</p><p>- Execute o Script disponível em:&nbsp;<a href="http://himalaia.bhe.serpro/wiki/images/7/7d/Make-requisicao-certificado-homologacao-equipamento-depois.sh" class="external text" title="http://himalaia.bhe.serpro/wiki/images/7/7d/Make-requisicao-certificado-homologacao-equipamento-depois.sh" rel="nofollow">make-requisicao-certificado-homologacao-equipamento-depois.sh</a><br> 
</p><p>5. a JKS está pronta para uso... Para utilizá-la basta iniciar a 
aplicação java ou o servidor de aplicação com os seguintes parâmetros: 
</p><p>-Djavax.net.ssl.keyStore=.../keystore.jks<br>-Djavax.net.ssl.keyStorePassword=changeit<br>-Djavax.net.ssl.trustStore=.../truststore.jks<br>-Djavax.net.ssl.trustStorePassword=changeit 
</p><p><br> 
</p>
<ul><li>Caso não possua uma truststore de testes, pode baixá-la através do link: <a href="http://himalaia.bhe.serpro/wiki/images/7/74/Truststore.jks" class="external text" title="http://himalaia.bhe.serpro/wiki/images/7/74/Truststore.jks" rel="nofollow">truststore.jks</a>
</li></ul>
<p><br>
</p>
<a name="Montagem_de_um_JKS_a_partir_de_um_pfx_.28contendo_os_certificados_das_AC.27s.29"></a><h1> <span class="mw-headline"> <b>Montagem de um JKS a partir de um pfx</b> (contendo os certificados das AC's)<br>  </span></h1>
<p><br> 
</p><p>1 - Importe o certificado .PFX do seu cliente para o IE 
&gt;&gt;&gt; FERRAMENTAS/OPÇÕES DA INTERNET/ ABA CONTEÚDO / BOTÃO 
CERTIFICADOS. 
</p><p>2- Selecione a aba "Pessoal". 
</p><p>3- Clique em importar. 
</p><p>4- O Sistema vai abrir um assistente. Selecione o Certificado e clique em avançar. 
</p><p>5- Na próxima tela MARQUE O CHECKBOX "Marcar esta chave como 
exportável. Isso possibilitará o backup e transporte das chaves 
posteriormente". Como o texto diz se você não marcar esta opção o 
certificado não poderá ser exportado 
</p><p>6- Após ser importado seu certificado vai para a aba Pessoal. Clique sobre ele e clique em "exportar" 
</p><p>7- Clique em avançar 
</p><p>8- Na próxima tela marque a opção: "Sim, exportar a chave privada". Clique em avançar. 
</p><p>9- Na janela seguinte marque o checkbox "Incluir todos os 
certificados no caminho de certificação, se possível". &lt;&lt;ESTA 
OPÇÃO É CRUCIAL NÃO ESQUEÇA DELA&nbsp;!!! 
</p><p>10- Informe a senha e a seguir o local onde o arquivo será salvo. 
</p><p>Com o novo PFX realizar o comando abaixo para gerar a Keystore desejada.<br> 
</p><p>11- <b>keytool -importkeystore -srckeystore 
certificado-origem.pfx -srcstoretype pkcs12 -destkeystore 
keystore-destino.jks -deststoretype JKS</b><br> 
</p><p><br>
</p><p>Comando para gerar um p12 a partir de um JKS: <b>keytool 
-importkeystore -srckeystore keystore-origem.jks -srcstoretype JKS 
-deststoretype PKCS12 -destkeystore keystore-converted.p12</b><br><br>
</p><p><br> 
</p><p><br> 
</p><p><br>
</p>
<!-- Saved in parser cache with key wikidb:pcache:idhash:2006-0!1!0!!pt-br!2!edit=0 and timestamp 20160527192415 -->
<div class="printfooter">
Retirado de  "<a href="http://himalaia.bhe.serpro/wiki/index.php/Gera%C3%A7%C3%A3o_de_keystore">http://himalaia.bhe.serpro/wiki/index.php/Gera%C3%A7%C3%A3o_de_keystore</a>"</div>
						<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Acessos</h5>
		<div class="pBody">
			<ul>
					 <li id="ca-nstab-main" class="selected"><a href="http://himalaia.bhe.serpro/wiki/index.php/Gera%C3%A7%C3%A3o_de_keystore" title="Ver a página de conteúdo [alt-c]" accesskey="c">Artigo</a></li>
					 <li id="ca-talk" class="new"><a href="http://himalaia.bhe.serpro/wiki/index.php?title=Discuss%C3%A3o:Gera%C3%A7%C3%A3o_de_keystore&amp;action=edit" title="Discussão sobre o conteúdo da página [alt-t]" accesskey="t">Discussão</a></li>
					 <li id="ca-viewsource"><a href="http://himalaia.bhe.serpro/wiki/index.php?title=Gera%C3%A7%C3%A3o_de_keystore&amp;action=edit" title="Esta página está protegida; você pode exibir seu código, no entanto. [alt-e]" accesskey="e">Ver código</a></li>
					 <li id="ca-history"><a href="http://himalaia.bhe.serpro/wiki/index.php?title=Gera%C3%A7%C3%A3o_de_keystore&amp;action=history" title="Edições anteriores desta página. [alt-h]" accesskey="h">História</a></li>
				</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Ferramentas pessoais</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="http://himalaia.bhe.serpro/wiki/index.php?title=Especial:Userlogin&amp;returnto=Gera%C3%A7%C3%A3o_de_keystore" title="Você é encorajado a autenticar-se, apesar disso não ser obrigatório. [alt-o]" accesskey="o">Entrar</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(http://10.200.109.97/wiki/images/logoSUPST.bmp);" href="http://himalaia.bhe.serpro/wiki/index.php/P%C3%A1gina_principal" title="Visitar a página principal [alt-z]" accesskey="z"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class="portlet" id="p-navigation">
		<h5>Navegação</h5>
		<div class="pBody">
			<ul>
				<li id="n-mainpage"><a href="http://himalaia.bhe.serpro/wiki/index.php/P%C3%A1gina_principal" title="Visitar a página principal [alt-z]" accesskey="z">Página principal</a></li>
				<li id="n-portal"><a href="http://himalaia.bhe.serpro/wiki/index.php/Supst:Portal_comunit%C3%A1rio" title="Sobre o projecto">Portal comunitário</a></li>
				<li id="n-currentevents"><a href="http://himalaia.bhe.serpro/wiki/index.php/Eventos_actuais" title="Informação temática sobre eventos actuais">Eventos atuais</a></li>
				<li id="n-recentchanges"><a href="http://himalaia.bhe.serpro/wiki/index.php/Especial:Recentchanges" title="A lista de mudanças recentes nesta wiki. [alt-r]" accesskey="r">Mudanças Recentes</a></li>
				<li id="n-randompage"><a href="http://himalaia.bhe.serpro/wiki/index.php/Especial:Random" title="Carregar página aleatória [alt-x]" accesskey="x">Página aleatória</a></li>
				<li id="n-help"><a href="http://himalaia.bhe.serpro/wiki/index.php/Supst:Ajuda" title="Um local reservado para auxílio.">Ajuda</a></li>
				<li id="n-sitesupport"><a href="http://himalaia.bhe.serpro/wiki/index.php/Supst:Apoio" title="Ajude-nos">Doações</a></li>
			</ul>
		</div>
	</div>
		<div id="p-search" class="portlet">
		<h5><label for="searchInput">Busca</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/wiki/index.php/Especial:Search" id="searchform"><div>
				<input id="searchInput" name="search" title="Pesquisar nesta wiki [alt-f]" accesskey="f" type="text">
				<input name="go" class="searchButton" id="searchGoButton" value="Vai" type="submit">&nbsp;
				<input name="fulltext" class="searchButton" id="mw-searchButton" value="Busca" type="submit">
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Ferramentas</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="http://himalaia.bhe.serpro/wiki/index.php/Especial:Whatlinkshere/Gera%C3%A7%C3%A3o_de_keystore" title="Lista de todas as páginas que ligam-se a esta [alt-j]" accesskey="j">Artigos Relacionado</a></li>
				<li id="t-recentchangeslinked"><a href="http://himalaia.bhe.serpro/wiki/index.php/Especial:Recentchangeslinked/Gera%C3%A7%C3%A3o_de_keystore" title="Mudanças recentes em páginas relacionadas a esta [alt-k]" accesskey="k">Páginas relacionadas</a></li>
<li id="t-upload"><a href="http://himalaia.bhe.serpro/wiki/index.php/Especial:Upload" title="Carregar imagens ou ficheiros media [alt-u]" accesskey="u">Carregar arquivo</a></li>
<li id="t-specialpages"><a href="http://himalaia.bhe.serpro/wiki/index.php/Especial:Specialpages" title="Lista de páginas especiais [alt-q]" accesskey="q">Páginas especiais</a></li>
				<li id="t-print"><a href="http://himalaia.bhe.serpro/wiki/index.php?title=Gera%C3%A7%C3%A3o_de_keystore&amp;printable=yes" title="Versão para impressão desta página [alt-p]" accesskey="p">Versão para impressão</a></li>				<li id="t-permalink"><a href="http://himalaia.bhe.serpro/wiki/index.php?title=Gera%C3%A7%C3%A3o_de_keystore&amp;oldid=53772" title="Link permanente para esta versão desta página">Ligação permanente</a></li>			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="Gera%C3%A7%C3%A3o_de_keystore_arquivos/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki"></a></div>
				<div id="f-copyrightico"><a href="http://www.gnu.org/copyleft/fdl.html"><img src="Gera%C3%A7%C3%A3o_de_keystore_arquivos/gnu-fdl.png" alt="GNU Free Documentation License 1.2"></a></div>
			<ul id="f-list">
				<li id="lastmod"> Está página foi modificada pela última vez em 14h29min, 19 de Novembro de 2015.</li>
				<li id="viewcount">Esta página foi acessada 644 vezes.</li>
				<li id="copyright">Conteúdo disponível sob <a href="http://www.gnu.org/copyleft/fdl.html" class="external " title="http://www.gnu.org/copyleft/fdl.html" rel="nofollow">GNU Free Documentation License 1.2</a>.</li>
				<li id="privacy"><a href="http://himalaia.bhe.serpro/wiki/index.php/Supst:Pol%C3%ADtica_de_privacidade" title="Supst:Política de privacidade">Política de privacidade</a></li>
				<li id="about"><a href="http://himalaia.bhe.serpro/wiki/index.php/Supst:Sobre" title="Supst:Sobre">Sobre a Supst</a></li>
				<li id="disclaimer"><a href="http://himalaia.bhe.serpro/wiki/index.php/Supst:Aviso_geral" title="Supst:Aviso geral">Alerta de Conteúdo</a></li>
			</ul>
		</div>
		
	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served in 0.114 secs. -->
</body></html>