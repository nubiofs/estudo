<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN" "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" version="XHTML+RDFa 1.0" dir="ltr" class="js"><head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="Generator" content="Drupal 7 (http://drupal.org)">
    <!-- base href="https://www.e-education.psu.edu/geog489/node/2231" -->
    <title>2.6.1.2 Example 2</title>
    <script type="text/javascript" src="2.6.1.2%20Example%202_arquivos/jquery.js"></script>
<script type="text/javascript" src="2.6.1.2%20Example%202_arquivos/jquery-extend-3.js"></script>
<script type="text/javascript" src="2.6.1.2%20Example%202_arquivos/jquery_002.js"></script>
<script type="text/javascript" src="2.6.1.2%20Example%202_arquivos/drupal.js"></script>
<script type="text/javascript" src="2.6.1.2%20Example%202_arquivos/shCore.js"></script>
<script type="text/javascript" src="2.6.1.2%20Example%202_arquivos/shBrushBash.js"></script>
<script type="text/javascript" src="2.6.1.2%20Example%202_arquivos/shBrushJScript.js"></script>
<script type="text/javascript" src="2.6.1.2%20Example%202_arquivos/shBrushJson.js"></script>
<script type="text/javascript" src="2.6.1.2%20Example%202_arquivos/shBrushPhp.js"></script>
<script type="text/javascript" src="2.6.1.2%20Example%202_arquivos/shBrushPowerShell.js"></script>
<script type="text/javascript" src="2.6.1.2%20Example%202_arquivos/shBrushPython.js"></script>
<script type="text/javascript" src="2.6.1.2%20Example%202_arquivos/shBrushVb.js"></script>
<script type="text/javascript" src="2.6.1.2%20Example%202_arquivos/printable_links.js"></script>
<script type="text/javascript" src="2.6.1.2%20Example%202_arquivos/toggler.js"></script>
<script type="text/javascript" src="2.6.1.2%20Example%202_arquivos/lti.js"></script>
<script type="text/javascript" src="2.6.1.2%20Example%202_arquivos/h5p-resizer.js"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/geog489\/","pathPrefix":"","ajaxPageState":{"theme":"gis","theme_token":"GVaqfWehBgX5XA6e9inTDiiHvGLHphM3X4JlIr-J0x8","js":{"sites\/all\/modules\/jquery_update\/replace\/jquery\/1.7\/jquery.min.js":1,"misc\/jquery-extend-3.4.0.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shCore.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushBash.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushJScript.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushJson.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushPhp.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushPowerShell.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushPython.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushVb.js":1,"sites\/all\/modules\/custom_js_libraries\/printable_links\/printable_links.js":1,"sites\/all\/modules\/custom_js_libraries\/toggler\/toggler.js":1,"sites\/all\/themes\/gis\/lti.js":1,"sites\/all\/themes\/gis\/..\/..\/modules\/h5p\/library\/js\/h5p-resizer.js":1}}});
//--><!]]>
</script>
        <meta name="robots" content="noindex, nofollow">        <style type="text/css" media="all">
@import url("https://www.e-education.psu.edu/geog489/modules/system/system.base.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/modules/system/system.menus.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/modules/system/system.messages.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/modules/system/system.theme.css?psbola");
</style>
<style type="text/css" media="all">
@import url("https://www.e-education.psu.edu/geog489/modules/book/book.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/modules/field/theme/field.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/modules/node/node.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/modules/quiz/quiz.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/modules/search/search.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/modules/user/user.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/modules/extlink/extlink.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/modules/views/css/views.css?psbola");
</style>
<link type="text/css" rel="stylesheet" href="2.6.1.2%20Example%202_arquivos/css_002.css" media="all">
<link type="text/css" rel="stylesheet" href="2.6.1.2%20Example%202_arquivos/css_003.css" media="all">
<link type="text/css" rel="stylesheet" href="2.6.1.2%20Example%202_arquivos/css.css" media="all">
<style type="text/css" media="all">
@import url("https://www.e-education.psu.edu/geog489/sites/all/modules/hidden_nodes/hidden_nodes.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/modules/ctools/css/ctools.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/libraries/syntaxhighlighter_3.0.83/styles/shCore.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/libraries/syntaxhighlighter_3.0.83/styles/shThemeDefault.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/modules/taxonomy_access/taxonomy_access.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/modules/print/print_ui/css/print_ui.theme.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/modules/print/css/print.css?psbola");
</style>
  </head>
  <body>
            <div class="print-site_name">Published on <em class="placeholder">GEOG 489: Advanced Python Programming for GIS</em> (<a href="https://www.e-education.psu.edu/geog489">https://www.e-education.psu.edu/geog489</a>)</div>
    <p>
    </p><div class="print-breadcrumb"><a href="https://www.e-education.psu.edu/geog489/home.html">Home</a> &gt; <a href="https://www.e-education.psu.edu/geog489/node/1405">GEOG 489</a> &gt; <a href="https://www.e-education.psu.edu/geog489/l2.html">Lesson 2 GUI Development with PyQt5 and Package Management</a> &gt; <a href="https://www.e-education.psu.edu/geog489/l2_p4.html">2.6 GUI development with QT5 and PyQt5 </a> &gt; <a href="https://www.e-education.psu.edu/geog489/node/2292">2.6.1 The manual approach</a> &gt; 2.6.1.2 Example 2</div>
    <hr class="print-hr">
        <div class="print-content"><div id="node-2231" class="section-5">
  <h1 class="book-heading">2.6.1.2 Example 2</h1>
  <div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even"><p>We
 are now moving on to example 2, a completely new example that focuses 
on the menu bar and status bar widgets as well as on defining user 
actions that can be associated with different input widgets and some 
other useful features of QT5 that are commonly used in GUI-based 
programs. Often GUI-based programs provide many ways in which the user 
can trigger a particular action, e.g. the action for saving the 
currently opened file can typically be performed by choosing the 
corresponding entry from the menu bar at the top, by a keyboard shortcut
 like CTRL+S for instance, and potentially also by a tool button in a 
toolbar and by some entry in a so-called <em>context menu</em> that 
shows up when you click the right mouse button. PyQT5 provides the 
QAction class for defining actions and these actions can then be 
associated with or added to different GUI elements that are supposed to 
trigger the action. For instance, in the following example we will 
create an action for exiting the program with the following four lines 
of code:</p>

<div><div id="highlighter_626712" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">exitAction </code><code class="python keyword">=</code> <code class="python plain">QAction(app.style().standardIcon(QStyle.SP_DialogCancelButton’), </code><code class="python string">'&amp;Exit'</code><code class="python plain">, mainWindow) </code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python plain">exitAction.setShortcut(</code><code class="python string">'Ctrl+Q'</code><code class="python plain">) </code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="python plain">exitAction.setStatusTip(</code><code class="python string">'Exit application'</code><code class="python plain">) </code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="python plain">exitAction.triggered.connect(app.quit) </code></div></div></td></tr></tbody></table></div></div>

<p>The QAction object for our exit action is created in the first line and then stored in variable <em>exitAction</em>. The first two parameters given to <em>QAction(…)</em>
 are an icon that will be associated with that action and the name. For 
the icon we use the SP_DialogCancelButton icon from the set of icons 
that comes with QT5. Of course, it is possible to use your own set of 
icons but we want to keep things simple&nbsp;here. The &amp; symbol in 
the name of the action (&amp;Exit) signals that it should be possible to
 use ALT+E as a keyboard shortcut to trigger the action when using the 
application’s menu bar. The last parameter is the parent object which 
needs be another QT object, the one for the application’s main window in
 this case (more on this in a moment).</p>

<p>In the following two lines we define the keyboard shortcut (Ctrl+Q) 
that can be used at any moment to trigger the action and a message that 
should be shown in the status bar (the bar at the bottom of the 
application’s main window that is typically used for showing status 
messages) when hovering over a GUI element that would trigger this 
action. Finally, in the last line we connect the event that our exit 
action is triggered (by whatever GUI element) to the quit slot of our 
application. So this is the part where we specify what the action should
 actually do and as we have seen before, we can either connect the 
signal directly to a slot of another GUI element or to a function that 
we defined ourselves.</p>

<p>We already briefly mentioned the “main window” of the application. In
 example 1 above, we used the QWidget object for the main window and 
container of the other GUI elements. In example 2, we will use the 
QMainWindow widget instead which represents a typical application window
 with potentially a menu bar and tool bar at the top, a large central 
area in the middle to display the main content of the app, and 
potentially a small status bar at the bottom. The image below shows how 
the main window we are going to create in example 2 will look.</p>

<div class="img-center"><img alt="see text above...screenshot of window with a file exit option" src="2.6.1.2%20Example%202_arquivos/example2_firstversion.jpg"><div class="img-caption">Figure 2.16 First version of the Example 2 GUI</div>
</div>

<p>Once a QMainWindow object has been created and stored in variable <em>mainWindow</em>, its menu bar (an object of type QMenuBar that is created automatically) can be accessed via the <em>menuBar()</em>
 method, so with the expression mainWindow.menuBar(). A menu bar 
consists of one or more menus (= objects of the QMenu class) which in 
turn consist of several menu entries. The entries can be&nbsp;actions or
 submenus which again are QMenu objects. To add a new menu to a menu 
bar, you call its <em>addMenu(…)</em> method and provide the name of the
 menu, for instance ‘&amp;File’. The method returns the newly created 
QMenu object as a result, so that you can use it to add menu entries to 
it. To add an action to a menu, you invoke a method called <em>addAction</em><em>(…)</em>
 of the menu object, providing the action as a parameter. With that 
explanation, it should be relatively easy to follow the code below. We 
have highlighted the important parts related to creating the main 
window, setting up the menu bar, and adding the exit action to it.</p>

<div><div id="highlighter_753463" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2 highlighted">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2 highlighted">11</div><div class="line number12 index11 alt1 highlighted">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2 highlighted">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">import</code> <code class="python plain">sys </code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python keyword">from</code> <code class="python plain">PyQt5.QtWidgets </code><code class="python keyword">import</code> <code class="python plain">QApplication, QMainWindow, QAction, QStyle </code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="python plain">app </code><code class="python keyword">=</code> <code class="python plain">QApplication(sys.argv) </code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2 highlighted"><code class="python plain">mainWindow </code><code class="python keyword">=</code> <code class="python plain">QMainWindow() </code></div><div class="line number8 index7 alt1"><code class="python plain">mainWindow.resize(</code><code class="python value">400</code><code class="python plain">,</code><code class="python value">200</code><code class="python plain">) </code></div><div class="line number9 index8 alt2"><code class="python plain">mainWindow.setWindowTitle(</code><code class="python string">"PyQt5 example 2"</code><code class="python plain">) </code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2 highlighted"><code class="python plain">fileMenu </code><code class="python keyword">=</code> <code class="python plain">mainWindow.menuBar().addMenu(</code><code class="python string">'&amp;File'</code><code class="python plain">)&nbsp; </code></div><div class="line number12 index11 alt1 highlighted"><code class="python plain">optionsMenu </code><code class="python keyword">=</code> <code class="python plain">mainWindow.menuBar().addMenu(</code><code class="python string">'&amp;Options'</code><code class="python plain">) </code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="python plain">exitAction </code><code class="python keyword">=</code> <code class="python plain">QAction(app.style().standardIcon(QStyle.SP_DialogCancelButton), </code><code class="python string">'&amp;Exit'</code><code class="python plain">, mainWindow) </code></div><div class="line number15 index14 alt2"><code class="python plain">exitAction.setShortcut(</code><code class="python string">'Ctrl+Q'</code><code class="python plain">) </code></div><div class="line number16 index15 alt1"><code class="python plain">exitAction.setStatusTip(</code><code class="python string">'Exit application'</code><code class="python plain">) </code></div><div class="line number17 index16 alt2"><code class="python plain">exitAction.triggered.connect(app.quit) </code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2 highlighted"><code class="python plain">fileMenu.addAction(exitAction) </code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="python plain">mainWindow.statusBar().showMessage(</code><code class="python string">'Waiting for your commands...'</code><code class="python plain">) </code></div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2"><code class="python plain">mainWindow.show() </code></div><div class="line number24 index23 alt1">&nbsp;</div><div class="line number25 index24 alt2"><code class="python plain">sys.exit(app.exec_()) </code></div></div></td></tr></tbody></table></div></div>

<p>The QMainWindow is created very similarly to the QWidget we used in 
example 1, meaning we can set the title and initial size of the widget 
(lines 8 and 9). The two menus ‘File’ and ‘Options’ are added to the 
menu bar of our main window in lines 11 and 12, and the QMenu objects 
returned are stored in variables <em>fileMenu</em> and <em>optionsMenu</em>,
 respectively. In line 19, we add the exit action we created with the 
code already discussed earlier (lines 14 to 17) to the ‘File’ menu. The 
icon and name we provided when creating the action will be used for the 
entry in the menu bar and selecting the entry will trigger the action 
and result in the quit() method of application being called.</p>

<p>Please note that in line 21, we also added a command to show a 
message in the status bar at the bottom of the main window when the 
application is started. The status bar object is accessed via the <em>statusBar</em><em>()</em> method of the QMainWindow, and then we directly call its <em>showMessage(…)</em>
 method specifying the text that should be displayed. We suggest that 
you run the program a few times, trying out the different ways to exit 
it via the menu entry (either by clicking the entry in the ‘File’ menu 
or using ALT+F followed by ALT+E) and the action's keyboard shortcut 
CTRL+Q that we defined.</p>

<p>So far, our 'File'&nbsp;menu only has a single entry and the 
'Options' menu is still completely empty. In the following, we are going
 to extend this&nbsp;example by adding ‘Open’ and ‘Save’ actions to the 
‘File’ menu making it appear somewhat similar to what you often see in 
programs. We also add entries to the 'Options' menu, namely one with a 
checkbox next to it that we use for controlling whether the label 
displayed in our main window is shown or hidden, and one that is a QMenu
 object for a submenu with two additional entries. The two images below 
illustrate&nbsp;how our menu bar will look after these changes.</p>

<div class="img-center"><img alt="screenshot of a file toolbar with options, open,  save and exit" src="2.6.1.2%20Example%202_arquivos/example2_filemenu.jpg"><div class="img-caption">Figure 2.17 Example 2 'File' menu with three actions</div>
</div>

<div class="img-center"><img alt="scrreenshot. Tool bar with options toggle label, and other options which expands to other option 1 &amp;2" src="2.6.1.2%20Example%202_arquivos/example21_optionsmenu.jpg"><div class="img-caption">Figure 2.18 Example 2 'Options' menu with a checkable entry and a submenu</div>
</div>

<p>In addition to the changes to the menu bar, we will use the 
QFileDialog widget to display a dialog for selecting the file that 
should be opened and we use a QMessageBox widget to display a quick 
message to the user that the user has to confirm. Here is the code for 
the new version with main changes highlighted. Further explanation will 
follow below:</p>

<div><div id="highlighter_202354" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1 highlighted">6</div><div class="line number7 index6 alt2 highlighted">7</div><div class="line number8 index7 alt1 highlighted">8</div><div class="line number9 index8 alt2 highlighted">9</div><div class="line number10 index9 alt1 highlighted">10</div><div class="line number11 index10 alt2 highlighted">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2 highlighted">13</div><div class="line number14 index13 alt1 highlighted">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1 highlighted">16</div><div class="line number17 index16 alt2 highlighted">17</div><div class="line number18 index17 alt1 highlighted">18</div><div class="line number19 index18 alt2 highlighted">19</div><div class="line number20 index19 alt1 highlighted">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2 highlighted">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2 highlighted">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2 highlighted">31</div><div class="line number32 index31 alt1 highlighted">32</div><div class="line number33 index32 alt2 highlighted">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1 highlighted">38</div><div class="line number39 index38 alt2 highlighted">39</div><div class="line number40 index39 alt1 highlighted">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1 highlighted">42</div><div class="line number43 index42 alt2 highlighted">43</div><div class="line number44 index43 alt1 highlighted">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1 highlighted">52</div><div class="line number53 index52 alt2 highlighted">53</div><div class="line number54 index53 alt1 highlighted">54</div><div class="line number55 index54 alt2 highlighted">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2 highlighted">57</div><div class="line number58 index57 alt1 highlighted">58</div><div class="line number59 index58 alt2 highlighted">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2 highlighted">61</div><div class="line number62 index61 alt1 highlighted">62</div><div class="line number63 index62 alt2 highlighted">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">import</code> <code class="python plain">sys </code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python keyword">from</code> <code class="python plain">PyQt5.QtWidgets </code><code class="python keyword">import</code> <code class="python plain">QApplication, QMainWindow, QAction, QStyle, QFileDialog, QMessageBox, QWidget, QGridLayout, QLabel, QMenu </code></div><div class="line number4 index3 alt1"><code class="python keyword">from</code> <code class="python plain">PyQt5.QtCore </code><code class="python keyword">import</code> <code class="python plain">Qt </code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1 highlighted"><code class="python keyword">def</code> <code class="python plain">openFile(): </code></div><div class="line number7 index6 alt2 highlighted"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">fileName, _ </code><code class="python keyword">=</code> <code class="python plain">QFileDialog.getOpenFileName(mainWindow, </code><code class="python string">"Open file"</code><code class="python plain">, "</code><code class="python string">", "</code><code class="python functions">All</code> <code class="python plain">files (</code><code class="python keyword">*</code><code class="python plain">.</code><code class="python keyword">*</code><code class="python plain">)") </code></div><div class="line number8 index7 alt1 highlighted"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">if</code> <code class="python plain">fileName: </code></div><div class="line number9 index8 alt2 highlighted"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">mainWindow.statusBar().showMessage(</code><code class="python string">'User has picked file '</code> <code class="python keyword">+</code> <code class="python plain">fileName) </code></div><div class="line number10 index9 alt1 highlighted"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">else</code><code class="python plain">: </code></div><div class="line number11 index10 alt2 highlighted"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">mainWindow.statusBar().showMessage(</code><code class="python string">'User canceled the file dialog.'</code><code class="python plain">) </code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2 highlighted"><code class="python keyword">def</code> <code class="python plain">saveFile(): </code></div><div class="line number14 index13 alt1 highlighted"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">QMessageBox.information(mainWindow, </code><code class="python string">'Important information'</code><code class="python plain">, </code><code class="python string">'Save file has not been implemented yet, sorry!'</code><code class="python plain">, QMessageBox.Ok) </code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1 highlighted"><code class="python keyword">def</code> <code class="python plain">toggleLabel(state): </code></div><div class="line number17 index16 alt2 highlighted"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">if</code> <code class="python plain">state: </code></div><div class="line number18 index17 alt1 highlighted"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">label.show() </code></div><div class="line number19 index18 alt2 highlighted"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">else</code><code class="python plain">: </code></div><div class="line number20 index19 alt1 highlighted"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">label.hide() </code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="python plain">app </code><code class="python keyword">=</code> <code class="python plain">QApplication(sys.argv) </code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="python plain">mainWindow </code><code class="python keyword">=</code> <code class="python plain">QMainWindow() </code></div><div class="line number25 index24 alt2"><code class="python plain">mainWindow.resize(</code><code class="python value">400</code><code class="python plain">,</code><code class="python value">200</code><code class="python plain">) </code></div><div class="line number26 index25 alt1"><code class="python plain">mainWindow.setWindowTitle(</code><code class="python string">"PyQt5 example 2"</code><code class="python plain">) </code></div><div class="line number27 index26 alt2 highlighted"><code class="python plain">mainWindow.setCentralWidget(QWidget()) </code></div><div class="line number28 index27 alt1">&nbsp;</div><div class="line number29 index28 alt2 highlighted"><code class="python plain">layout </code><code class="python keyword">=</code> <code class="python plain">QGridLayout(mainWindow.centralWidget()) </code></div><div class="line number30 index29 alt1">&nbsp;</div><div class="line number31 index30 alt2 highlighted"><code class="python plain">label </code><code class="python keyword">=</code> <code class="python plain">QLabel(</code><code class="python string">"Some text ..."</code><code class="python plain">) </code></div><div class="line number32 index31 alt1 highlighted"><code class="python plain">label.setAlignment(Qt.AlignCenter) </code></div><div class="line number33 index32 alt2 highlighted"><code class="python plain">layout.addWidget(label,</code><code class="python value">0</code><code class="python plain">,</code><code class="python value">0</code><code class="python plain">) </code></div><div class="line number34 index33 alt1">&nbsp;</div><div class="line number35 index34 alt2"><code class="python plain">fileMenu </code><code class="python keyword">=</code> <code class="python plain">mainWindow.menuBar().addMenu(</code><code class="python string">'&amp;File'</code><code class="python plain">) </code></div><div class="line number36 index35 alt1"><code class="python plain">optionsMenu </code><code class="python keyword">=</code> <code class="python plain">mainWindow.menuBar().addMenu(</code><code class="python string">'&amp;Options'</code><code class="python plain">) </code></div><div class="line number37 index36 alt2">&nbsp;</div><div class="line number38 index37 alt1 highlighted"><code class="python plain">openAction </code><code class="python keyword">=</code> <code class="python plain">QAction(</code><code class="python string">'&amp;Open...'</code><code class="python plain">, mainWindow) </code></div><div class="line number39 index38 alt2 highlighted"><code class="python plain">openAction.triggered.connect(openFile) </code></div><div class="line number40 index39 alt1 highlighted"><code class="python plain">fileMenu.addAction(openAction) </code></div><div class="line number41 index40 alt2">&nbsp;</div><div class="line number42 index41 alt1 highlighted"><code class="python plain">saveAction </code><code class="python keyword">=</code> <code class="python plain">QAction(</code><code class="python string">'&amp;Save'</code><code class="python plain">, mainWindow) </code></div><div class="line number43 index42 alt2 highlighted"><code class="python plain">saveAction.triggered.connect(saveFile) </code></div><div class="line number44 index43 alt1 highlighted"><code class="python plain">fileMenu.addAction(saveAction) </code></div><div class="line number45 index44 alt2">&nbsp;</div><div class="line number46 index45 alt1"><code class="python plain">exitAction </code><code class="python keyword">=</code> <code class="python plain">QAction(app.style().standardIcon(QStyle.SP_DialogCancelButton), </code><code class="python string">'&amp;Exit'</code><code class="python plain">, mainWindow) </code></div><div class="line number47 index46 alt2"><code class="python plain">exitAction.setShortcut(</code><code class="python string">'Ctrl+Q'</code><code class="python plain">) </code></div><div class="line number48 index47 alt1"><code class="python plain">exitAction.setStatusTip(</code><code class="python string">'Exit application'</code><code class="python plain">) </code></div><div class="line number49 index48 alt2"><code class="python plain">exitAction.triggered.connect(app.quit) </code></div><div class="line number50 index49 alt1"><code class="python plain">fileMenu.addAction(exitAction) </code></div><div class="line number51 index50 alt2">&nbsp;</div><div class="line number52 index51 alt1 highlighted"><code class="python plain">toggleLabelAction </code><code class="python keyword">=</code> <code class="python plain">QAction(</code><code class="python string">'&amp;Toggle label'</code><code class="python plain">, mainWindow, checkable</code><code class="python keyword">=</code><code class="python color1">True</code><code class="python plain">) </code></div><div class="line number53 index52 alt2 highlighted"><code class="python plain">toggleLabelAction.setChecked(</code><code class="python color1">True</code><code class="python plain">) </code></div><div class="line number54 index53 alt1 highlighted"><code class="python plain">toggleLabelAction.triggered.connect(toggleLabel) </code></div><div class="line number55 index54 alt2 highlighted"><code class="python plain">optionsMenu.addAction(toggleLabelAction) </code></div><div class="line number56 index55 alt1">&nbsp;</div><div class="line number57 index56 alt2 highlighted"><code class="python plain">otherOptionsSubmenu </code><code class="python keyword">=</code> <code class="python plain">QMenu(</code><code class="python string">'&amp;Other options'</code><code class="python plain">, mainWindow) </code></div><div class="line number58 index57 alt1 highlighted"><code class="python plain">otherOption1Action </code><code class="python keyword">=</code> <code class="python plain">QAction(</code><code class="python string">'Other option &amp;1'</code><code class="python plain">, mainWindow, checkable</code><code class="python keyword">=</code><code class="python color1">True</code><code class="python plain">) </code></div><div class="line number59 index58 alt2 highlighted"><code class="python plain">otherOption2Action </code><code class="python keyword">=</code> <code class="python plain">QAction(</code><code class="python string">'Other option &amp;2'</code><code class="python plain">, mainWindow, checkable</code><code class="python keyword">=</code><code class="python color1">True</code><code class="python plain">) </code></div><div class="line number60 index59 alt1">&nbsp;</div><div class="line number61 index60 alt2 highlighted"><code class="python plain">otherOptionsSubmenu.addAction(otherOption1Action) </code></div><div class="line number62 index61 alt1 highlighted"><code class="python plain">otherOptionsSubmenu.addAction(otherOption2Action) </code></div><div class="line number63 index62 alt2 highlighted"><code class="python plain">optionsMenu.addMenu(otherOptionsSubmenu) </code></div><div class="line number64 index63 alt1">&nbsp;</div><div class="line number65 index64 alt2"><code class="python plain">mainWindow.statusBar().showMessage(</code><code class="python string">'Waiting for your commands...'</code><code class="python plain">) </code></div><div class="line number66 index65 alt1">&nbsp;</div><div class="line number67 index66 alt2"><code class="python plain">mainWindow.show() </code></div><div class="line number68 index67 alt1">&nbsp;</div><div class="line number69 index68 alt2"><code class="python plain">sys.exit(app.exec_()) </code></div></div></td></tr></tbody></table></div></div>

<p>In addition to importing some more widgets and other PyQT classes that we need, we define three functions at the beginning, <em>openFile()</em>, <em>saveFile()</em>, and <em>toggleLabel(…)</em>.
 These will serve as the event handler functions for some of the new 
actions/menu entries that we are adding, and we will discuss them in 
more detail later.</p>

<p>The next thing to note is that in lines 31 to 33 we are reintroducing
 our label object from the first example in the center of the main 
window. Since our window is based on QMainWindow, we first have to 
create a QWidget to fill the central area of the main window via its <em>setCentralWidget(…)</em>
 method (line 27), and then we add the needed layouts and QLabel object 
itself to this central widget exactly as in example 1 (lines 29 to 33).</p>

<p>In lines 38 and&nbsp;42, we create new QAction objects for the two actions we want to add to the ‘File’ menu in variable <em>fileMenu</em>.
 To keep the code from getting too long, we don’t setup icons, keyboard 
shortcuts, and status bar tips for these like we did for the exit 
action, but these could be easily added. They are set up to call the <em>openFile() </em>and <em>saveFile() </em>functions we defined when they are triggered (lines 39 and 43), and both actions are added to <em>fileMenu</em> via the <em>addAction</em><em>(…)</em> method in lines 40 and 44.</p>

<p>In lines 52 to 55, the action with the checkbox to toggle the label 
on and off is created and added to the ‘Options’ menu. The main 
difference to the other actions is that we use the additional keyword 
argument checkable=True when creating the action object in line 52, and 
then set the initial state to being checked in the following line. The 
"triggered" signal of the action is connected to the <em>toggleLabel(…)</em> function. Note how this function, in contrast to other event handler function we created before, has a parameter <em>state</em>
 that when called will be given the state of the action, meaning whether
 it is checked or unchecked, as a boolean. The code in the body of the 
function in lines 17 to 20 then simply checks whether this state is True
 for "checked" and if so, makes sure that the label is visible by 
calling its <em>show()</em> method. If <em>state</em> is False for "unchecked", it will call <em>hide()</em> instead and the label will become invisible.</p>

<p>In lines 57&nbsp;to 63, we create a submenu for the ‘Options’ menu 
with two more checkable actions that we simply call ‘Other 
option&nbsp;1’ and ‘Other option 2’. This is just for illustrating how 
to create a submenu in a menu bar, so we don’t bother with linking 
these&nbsp;actions to some actual functionality&nbsp;as we might in a 
real-world situation. The important part starts with line 57 where we 
create a QMenu object called ‘Other options’ that we then add the 
actions to in line 61 and 62. In line 63, we then add this new menu to 
our ‘Options’ menu in variable <em>optionsMenu</em>. Since we are not adding an action but a submenu here, we have to use the <em>addMenu(…)</em> method for this.</p>

<p>Now it is time to have a closer look at the<em> openFile()</em> and <em>saveFile() </em>functions that describe what should happen if the open or save actions are triggered. We are keeping things very simple in the <em>saveFile() </em>function,
 so let us start with that one: Since we are just creating a GUI 
framework here without real functionality, we only display a warning 
message to the user that no save file functionality has been implemented
 yet. We do this with the help of the QMessageBox widget that has the 
purpose of making, creating,&nbsp;and showing such message boxes as 
easily as possible. QMessageBox has several methods that can be invoked 
to display different kinds of messages such as simple information text 
or questions that require some user input. To just display some text and
 have an OK button that the user needs to click for confirmation, we use
 the <em>information(…)</em> method (line 14). We have to provide a 
parent QT object (mainWindow), a title, the information text, and the 
kind of buttons we want in the message box (QMessageBox.Ok) as 
parameters.</p>

<p>Finally, let’s look at the <em>openFile()</em> function in lines 6 to
 11: Here we illustrate what would typically happen when the action to 
open a file is triggered. Among other things, you typically want to 
provide a file browser dialog that allows the user to pick the file that
 should be opened. Such a dialog is much more complicated than a simple 
message box, so we cannot use QMessageBox for this, but fortunately QT 
provides the QFileDialog widget for such purposes. Like QMessageBox, 
QFileDialog has multiple methods that one can call depending on whether 
one needs a dialog for opening an existing file, selecting a folder, or 
saving a file under a name chosen by the user. We here use <em>QFileDialog.getOpenFileName (…)</em>
 and provide a parent object (mainWindow), a title for the dialog, and a
 string that specifies what files can be selected based on their file 
extension as parameters. For the last parameter, we use "*.*" meaning 
that the user can pick any file.</p>

<p><em>getOpenFileName (…)</em> has a return value that indicates 
whether the user left the dialog via the Ok button or whether the user 
canceled the dialog. In the first case, the return value will be the 
name of the file selected, and in the second case it will be None. We 
capture this return value in variable <em>fileName</em> and then use an if-statement to distinguish both cases: In the first case, we use <em>showMessage(…)</em> of our status bar to display a message saying which file was selected. If the condition is False (so if <em>fileName</em> is None), we use the same message to inform that the dialog was canceled.</p>

<p>This second version of example 2 has already gotten quite long and 
the same applies for our explanation. You should take a moment to run 
the actual application and test out the different actions we 
implemented, the message box display, the open file dialog, toggling the
 label on and off via the entry under the ‘Options’ menu, and so on.</p>
</div></div></div>  </div>
</div>
    <div class="print-footer">
</div>
    <hr class="print-hr">
          <div class="print-source_url">
        <strong>Source URL:</strong> https://www.e-education.psu.edu/geog489/node/2231      </div>
        <div class="print-links"></div>
    <script type="text/javascript" src="2.6.1.2%20Example%202_arquivos/syntaxhighlighter.js"></script>
  

</body></html>