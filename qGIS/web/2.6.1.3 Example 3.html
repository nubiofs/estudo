<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN" "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" version="XHTML+RDFa 1.0" dir="ltr" class="js"><head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="Generator" content="Drupal 7 (http://drupal.org)">
    <!-- base href="https://www.e-education.psu.edu/geog489/node/2232" -->
    <title>2.6.1.3 Example 3</title>
    <script type="text/javascript" src="2.6.1.3%20Example%203_arquivos/jquery.js"></script>
<script type="text/javascript" src="2.6.1.3%20Example%203_arquivos/jquery-extend-3.js"></script>
<script type="text/javascript" src="2.6.1.3%20Example%203_arquivos/jquery_002.js"></script>
<script type="text/javascript" src="2.6.1.3%20Example%203_arquivos/drupal.js"></script>
<script type="text/javascript" src="2.6.1.3%20Example%203_arquivos/shCore.js"></script>
<script type="text/javascript" src="2.6.1.3%20Example%203_arquivos/shBrushBash.js"></script>
<script type="text/javascript" src="2.6.1.3%20Example%203_arquivos/shBrushJScript.js"></script>
<script type="text/javascript" src="2.6.1.3%20Example%203_arquivos/shBrushJson.js"></script>
<script type="text/javascript" src="2.6.1.3%20Example%203_arquivos/shBrushPhp.js"></script>
<script type="text/javascript" src="2.6.1.3%20Example%203_arquivos/shBrushPowerShell.js"></script>
<script type="text/javascript" src="2.6.1.3%20Example%203_arquivos/shBrushPython.js"></script>
<script type="text/javascript" src="2.6.1.3%20Example%203_arquivos/shBrushVb.js"></script>
<script type="text/javascript" src="2.6.1.3%20Example%203_arquivos/printable_links.js"></script>
<script type="text/javascript" src="2.6.1.3%20Example%203_arquivos/toggler.js"></script>
<script type="text/javascript" src="2.6.1.3%20Example%203_arquivos/lti.js"></script>
<script type="text/javascript" src="2.6.1.3%20Example%203_arquivos/h5p-resizer.js"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/geog489\/","pathPrefix":"","ajaxPageState":{"theme":"gis","theme_token":"0BHOKOrq4e4iGro7UhcrtOzDj0paULCqDY0gnx20940","js":{"sites\/all\/modules\/jquery_update\/replace\/jquery\/1.7\/jquery.min.js":1,"misc\/jquery-extend-3.4.0.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shCore.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushBash.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushJScript.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushJson.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushPhp.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushPowerShell.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushPython.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushVb.js":1,"sites\/all\/modules\/custom_js_libraries\/printable_links\/printable_links.js":1,"sites\/all\/modules\/custom_js_libraries\/toggler\/toggler.js":1,"sites\/all\/themes\/gis\/lti.js":1,"sites\/all\/themes\/gis\/..\/..\/modules\/h5p\/library\/js\/h5p-resizer.js":1}}});
//--><!]]>
</script>
        <meta name="robots" content="noindex, nofollow">        <style type="text/css" media="all">
@import url("https://www.e-education.psu.edu/geog489/modules/system/system.base.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/modules/system/system.menus.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/modules/system/system.messages.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/modules/system/system.theme.css?psbola");
</style>
<style type="text/css" media="all">
@import url("https://www.e-education.psu.edu/geog489/modules/book/book.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/modules/field/theme/field.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/modules/node/node.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/modules/quiz/quiz.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/modules/search/search.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/modules/user/user.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/modules/extlink/extlink.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/modules/views/css/views.css?psbola");
</style>
<link type="text/css" rel="stylesheet" href="2.6.1.3%20Example%203_arquivos/css_002.css" media="all">
<link type="text/css" rel="stylesheet" href="2.6.1.3%20Example%203_arquivos/css_003.css" media="all">
<link type="text/css" rel="stylesheet" href="2.6.1.3%20Example%203_arquivos/css.css" media="all">
<style type="text/css" media="all">
@import url("https://www.e-education.psu.edu/geog489/sites/all/modules/hidden_nodes/hidden_nodes.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/modules/ctools/css/ctools.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/libraries/syntaxhighlighter_3.0.83/styles/shCore.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/libraries/syntaxhighlighter_3.0.83/styles/shThemeDefault.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/modules/taxonomy_access/taxonomy_access.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/modules/print/print_ui/css/print_ui.theme.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/modules/print/css/print.css?psbola");
</style>
  </head>
  <body>
            <div class="print-site_name">Published on <em class="placeholder">GEOG 489: Advanced Python Programming for GIS</em> (<a href="https://www.e-education.psu.edu/geog489">https://www.e-education.psu.edu/geog489</a>)</div>
    <p>
    </p><div class="print-breadcrumb"><a href="https://www.e-education.psu.edu/geog489/home.html">Home</a> &gt; <a href="https://www.e-education.psu.edu/geog489/node/1405">GEOG 489</a> &gt; <a href="https://www.e-education.psu.edu/geog489/l2.html">Lesson 2 GUI Development with PyQt5 and Package Management</a> &gt; <a href="https://www.e-education.psu.edu/geog489/l2_p4.html">2.6 GUI development with QT5 and PyQt5 </a> &gt; <a href="https://www.e-education.psu.edu/geog489/node/2292">2.6.1 The manual approach</a> &gt; 2.6.1.3 Example 3</div>
    <hr class="print-hr">
        <div class="print-content"><div id="node-2232" class="section-5">
  <h1 class="book-heading">2.6.1.3 Example 3</h1>
  <div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even"><p>We
 are now leaving the world of menu bars behind and move on to a third 
and final example of manually creating PyQT5 based programs which has 
the purpose of showing you the most common widgets used for getting 
input from the user as well as the following things:</p>

<ul><li>how to build own dialog boxes from these widgets, similar to the open file dialog for example,</li>
	<li>how to arrange widgets in more complex ways,</li>
	<li>and how to use the created&nbsp;dialog boxes&nbsp;from the main code.</li>
</ul><p>We will keep the actual functionality we have to implement in 
this example to a minimum and mainly connect signals sent by the 
different widgets to slots of other widgets. As a result, the dialog box
 will operate in a somewhat weird way and we, hence, call this example 
“The world’s weirdest dialog box”. It still serves the purpose of 
illustrating the different event types and how to react to them.</p>

<p>To understand the example, it is important to know that dialog boxes can be invoked in two different ways, <em>modally</em> and <em>modelessly</em> (also referred to as <em>non-modal</em>).
 Modal means that when the method for displaying the dialog to the user 
is called, it will only return from the call once the user closes the 
dialog (e.g. by pressing an Ok or Cancel button). That means the user 
cannot interact with any other parts of the program's GUI, only the 
dialog box. When a dialog is invoked in the modeless approach, the 
method for displaying the dialog will return immediately and the dialog 
will essentially be displayed in addition to the other windows of the 
program that still can be interacted with.</p>

<p>The QDialog widget that we will use to build our own dialog box in this example, therefore, has two methods: <em>exec_()</em> for displaying the dialog modally, and <em>show()</em> for displaying it in the modeless way. In contrast to <em>show()</em>, <em>exec_()</em>
 has a return value that indicates whether the dialog was canceled or 
has been closed normally, e.g. by pressing an Ok button. You may wonder 
how our program would be informed about the fact that the dialog has 
been closed and in which way in the modeless option using <em>show()</em>? This happens via the signals <em>accepted</em> and <em>rejected</em>
 that the dialog will produce in this case and that we can connect to in
 the usual way. You will see an example of that later on but we first 
start with a modal version of our dialog box.</p>

<p>The final version of example 3 will be even longer than that of 
example 2. We, therefore, added some comments to structure the code into
 different parts, e.g. for setting up the application and GUI, for 
defining the functions that realize the main functionality, for wiring 
things up by connecting signals to slots or functions, and so on. In 
case you run into any issues while going through the following steps to 
produce the final code for the example, the <a href="https://www.e-education.psu.edu/geog489/sites/www.e-education.psu.edu.geog489/files/downloads/QT_Example3_modal.zip">final script file can be downloaded here</a> <span class="print-footnote">[1]</span>.
 In the first skeleton of the code shown below, some of the sections 
introduced by the comments&nbsp;are still empty but we will fill them 
while we move along. This first version only illustrates how to create 
an empty QDialog object for our dialog box and show it (modally) when a 
button located on the main window is clicked. The most important parts 
of the code are again highlighted.</p>

<div class="img-center"><img alt="screenshot of two windows, one says open dialog...and the other says &quot;the world's weirdest dialog box&quot;" src="2.6.1.3%20Example%203_arquivos/example3_firstversion.jpg"><div class="img-caption">Figure 2.19 First version of the Example 3 with an empty dialog box that can be opened by clicking the button on the main window</div>
</div>

<div><div id="highlighter_305375" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2 highlighted">17</div><div class="line number18 index17 alt1 highlighted">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1 highlighted">20</div><div class="line number21 index20 alt2 highlighted">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2 highlighted">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python comments"># imports&nbsp; </code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python keyword">import</code> <code class="python plain">sys </code></div><div class="line number4 index3 alt1"><code class="python keyword">from</code> <code class="python plain">PyQt5.QtWidgets </code><code class="python keyword">import</code> <code class="python plain">QApplication, QMainWindow, QPushButton, QGridLayout, QWidget, QDialog </code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="python comments"># set up app and GUI&nbsp; </code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="python plain">app </code><code class="python keyword">=</code> <code class="python plain">QApplication(sys.argv) </code></div><div class="line number9 index8 alt2"><code class="python spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number10 index9 alt1"><code class="python plain">mainWindow </code><code class="python keyword">=</code> <code class="python plain">QMainWindow() </code></div><div class="line number11 index10 alt2"><code class="python plain">mainWindow.resize(</code><code class="python value">400</code><code class="python plain">,</code><code class="python value">200</code><code class="python plain">) </code></div><div class="line number12 index11 alt1"><code class="python plain">mainWindow.setWindowTitle(</code><code class="python string">"PyQt5 example 3"</code><code class="python plain">) </code></div><div class="line number13 index12 alt2"><code class="python plain">mainWindow.setCentralWidget(QWidget()) </code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="python plain">layout </code><code class="python keyword">=</code> <code class="python plain">QGridLayout(mainWindow.centralWidget()) </code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2 highlighted"><code class="python plain">button </code><code class="python keyword">=</code> <code class="python plain">QPushButton(</code><code class="python string">"Open dialog ..."</code><code class="python plain">) </code></div><div class="line number18 index17 alt1 highlighted"><code class="python plain">layout.addWidget(button,</code><code class="python value">0</code><code class="python plain">,</code><code class="python value">0</code><code class="python plain">) </code></div><div class="line number19 index18 alt2"><code class="python spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number20 index19 alt1 highlighted"><code class="python plain">dialogBox </code><code class="python keyword">=</code> <code class="python plain">QDialog() </code></div><div class="line number21 index20 alt2 highlighted"><code class="python plain">dialogBox.setWindowTitle(</code><code class="python string">"The world's weirdest dialog box"</code><code class="python plain">) </code></div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2"><code class="python comments"># functions for interactions </code></div><div class="line number24 index23 alt1">&nbsp;</div><div class="line number25 index24 alt2"><code class="python comments"># functions for modal version </code></div><div class="line number26 index25 alt1">&nbsp;</div><div class="line number27 index26 alt2"><code class="python comments"># functions for modeless version </code></div><div class="line number28 index27 alt1">&nbsp;</div><div class="line number29 index28 alt2"><code class="python comments"># connect signals and other initializations </code></div><div class="line number30 index29 alt1">&nbsp;</div><div class="line number31 index30 alt2 highlighted"><code class="python plain">button.clicked.connect(dialogBox.exec_) </code><code class="python comments"># invoke dialog modal version </code></div><div class="line number32 index31 alt1">&nbsp;</div><div class="line number33 index32 alt2"><code class="python comments"># run the program </code></div><div class="line number34 index33 alt1"><code class="python spaces">&nbsp;</code>&nbsp;</div><div class="line number35 index34 alt2"><code class="python plain">mainWindow.show() </code></div><div class="line number36 index35 alt1">&nbsp;</div><div class="line number37 index36 alt2"><code class="python plain">sys.exit(app.exec_()) </code></div></div></td></tr></tbody></table></div></div>

<p>The QDialog widget is created in line 21 and it is stored in variable <em>dialogBox</em>.
 We can now add content (meaning other widgets) to it in a similar way 
as we did with QWidget objects in previous examples using the <em>addWidget(…)</em> and <em>addLayout(…)</em>
 methods. In lines 17 and 18, we create a simple push button and add it 
to our main window. In line 31, we connect the "clicked" signal of this 
button with the <em>exec_() </em>method of our (still empty) dialog box. As a result, when the button is pressed,&nbsp;<em>exec_()</em>
 will be called and the dialog box will be displayed on top of the main 
window in a modal way blocking the rest of the GUI. Run the application 
now and see whether the dialog shows up as expected when the button is 
clicked.</p>

<p>We are now going to add the widgets to our dialog box in variable <em>dialogBox</em>. The result should look as in the image below:</p>

<div class="img-center"><img alt="window titles weirdest dialog box now filled with widgets for name, text box, and check boxes" src="2.6.1.3%20Example%203_arquivos/example3_secondversion.jpg"><div class="img-caption">Figure 2.20 Second version of the Example 3 GUI with the dialog box populated with different widgets</div>
</div>

<p>Please follow the steps below to create this new version of example 3:</p>

<p><strong>Step 1.</strong> Replace all the lines with import statements
 under the comment “# imports” and before the comment “# set up app and 
GUI” with the following lines.</p>

<div><div id="highlighter_217039" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">import</code> <code class="python plain">sys, random </code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python keyword">from</code> <code class="python plain">PyQt5.QtWidgets </code><code class="python keyword">import</code> <code class="python plain">QApplication, QMainWindow, QPushButton, QGridLayout, QWidget, QDialog, \ </code></div><div class="line number4 index3 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;</code><code class="python plain">QVBoxLayout, QGroupBox, QLabel, QLineEdit, QTextEdit, QHBoxLayout, QListView, QRadioButton, \ </code></div><div class="line number5 index4 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;</code><code class="python plain">QCheckBox, QComboBox, QDialogButtonBox </code></div><div class="line number6 index5 alt1"><code class="python keyword">from</code> <code class="python plain">PyQt5.QtCore </code><code class="python keyword">import</code> <code class="python plain">Qt, QVariant </code></div><div class="line number7 index6 alt2"><code class="python keyword">from</code> <code class="python plain">PyQt5.QtGui </code><code class="python keyword">import</code> <code class="python plain">QPixmap, QStandardItemModel, QStandardItem </code></div></div></td></tr></tbody></table></div></div>

<p>As you can see, we need to import quite a few more widget classes. In
 addition, using some of these will require additional auxiliary classes
 from the PyQt5.QtCore and PyQt5.QtGui modules.</p>

<p><strong>Step 2.</strong> Keep the code that is currently under the 
comment “# set up app and GUI” as this will not change. But then add the
 following code directly after it, still before the “# functions for 
interactions” comment.</p>

<div><div id="highlighter_741678" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">mainVerticalLayout </code><code class="python keyword">=</code> <code class="python plain">QVBoxLayout(dialogBox) </code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python plain">nameGroupBox </code><code class="python keyword">=</code> <code class="python plain">QGroupBox(</code><code class="python string">"Name"</code><code class="python plain">) </code><code class="python comments"># row 1 of vertical layout </code></div><div class="line number4 index3 alt1"><code class="python plain">mainVerticalLayout.addWidget(nameGroupBox) </code></div><div class="line number5 index4 alt2"><code class="python plain">nameGridLayout </code><code class="python keyword">=</code> <code class="python plain">QGridLayout(nameGroupBox) </code></div><div class="line number6 index5 alt1"><code class="python plain">firstNameLabel </code><code class="python keyword">=</code> <code class="python plain">QLabel(</code><code class="python string">"First name:"</code><code class="python plain">) </code></div><div class="line number7 index6 alt2"><code class="python plain">nameGridLayout.addWidget(firstNameLabel, </code><code class="python value">0</code><code class="python plain">, </code><code class="python value">0</code><code class="python plain">) </code></div><div class="line number8 index7 alt1"><code class="python plain">lastNameLabel </code><code class="python keyword">=</code> <code class="python plain">QLabel(</code><code class="python string">"Last name:"</code><code class="python plain">) </code></div><div class="line number9 index8 alt2"><code class="python plain">nameGridLayout.addWidget(lastNameLabel, </code><code class="python value">1</code><code class="python plain">, </code><code class="python value">0</code><code class="python plain">) </code></div><div class="line number10 index9 alt1"><code class="python plain">firstNameLineEdit </code><code class="python keyword">=</code> <code class="python plain">QLineEdit() </code></div><div class="line number11 index10 alt2"><code class="python plain">nameGridLayout.addWidget(firstNameLineEdit, </code><code class="python value">0</code><code class="python plain">, </code><code class="python value">1</code><code class="python plain">) </code></div><div class="line number12 index11 alt1"><code class="python plain">lastNameLineEdit </code><code class="python keyword">=</code> <code class="python plain">QLineEdit() </code></div><div class="line number13 index12 alt2"><code class="python plain">nameGridLayout.addWidget(lastNameLineEdit, </code><code class="python value">1</code><code class="python plain">, </code><code class="python value">1</code><code class="python plain">) </code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="python plain">imageHorizontalLayout </code><code class="python keyword">=</code> <code class="python plain">QHBoxLayout() </code><code class="python comments"># row 2 </code></div><div class="line number16 index15 alt1"><code class="python plain">mainVerticalLayout.addLayout(imageHorizontalLayout) </code></div><div class="line number17 index16 alt2"><code class="python plain">imageLabel </code><code class="python keyword">=</code> <code class="python plain">QLabel() </code></div><div class="line number18 index17 alt1"><code class="python plain">imageLabel.setPixmap(QPixmap(</code><code class="python string">"psu.PNG"</code><code class="python plain">).scaledToWidth(</code><code class="python value">172</code><code class="python plain">))&nbsp; </code></div><div class="line number19 index18 alt2"><code class="python plain">imageHorizontalLayout.addWidget(imageLabel) </code></div><div class="line number20 index19 alt1"><code class="python plain">textEdit </code><code class="python keyword">=</code> <code class="python plain">QTextEdit() </code></div><div class="line number21 index20 alt2"><code class="python plain">textEdit.setText(</code><code class="python string">"&lt;write whatever you want here&gt;"</code><code class="python plain">) </code></div><div class="line number22 index21 alt1"><code class="python plain">imageHorizontalLayout.addWidget(textEdit) </code></div><div class="line number23 index22 alt2"><code class="python spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number24 index23 alt1"><code class="python plain">listGridLayout </code><code class="python keyword">=</code> <code class="python plain">QGridLayout() </code><code class="python comments"># row 3 </code></div><div class="line number25 index24 alt2"><code class="python plain">mainVerticalLayout.addLayout(listGridLayout) </code></div><div class="line number26 index25 alt1"><code class="python plain">listView </code><code class="python keyword">=</code> <code class="python plain">QListView() </code></div><div class="line number27 index26 alt2"><code class="python plain">listGridLayout.addWidget(listView, </code><code class="python value">0</code><code class="python plain">, </code><code class="python value">0</code><code class="python plain">, </code><code class="python value">4</code><code class="python plain">, </code><code class="python value">1</code><code class="python plain">) </code></div><div class="line number28 index27 alt1"><code class="python plain">clearPushButton </code><code class="python keyword">=</code> <code class="python plain">QPushButton(</code><code class="python string">"Clear"</code><code class="python plain">) </code></div><div class="line number29 index28 alt2"><code class="python plain">listGridLayout.addWidget(clearPushButton, </code><code class="python value">0</code><code class="python plain">, </code><code class="python value">1</code><code class="python plain">) </code></div><div class="line number30 index29 alt1"><code class="python plain">hidePushButton </code><code class="python keyword">=</code> <code class="python plain">QPushButton(</code><code class="python string">"Hide"</code><code class="python plain">) </code></div><div class="line number31 index30 alt2"><code class="python plain">listGridLayout.addWidget(hidePushButton, </code><code class="python value">1</code><code class="python plain">, </code><code class="python value">1</code><code class="python plain">) </code></div><div class="line number32 index31 alt1"><code class="python plain">showPushButton </code><code class="python keyword">=</code> <code class="python plain">QPushButton(</code><code class="python string">"Show"</code><code class="python plain">) </code></div><div class="line number33 index32 alt2"><code class="python plain">listGridLayout.addWidget(showPushButton, </code><code class="python value">2</code><code class="python plain">, </code><code class="python value">1</code><code class="python plain">) </code></div><div class="line number34 index33 alt1"><code class="python plain">listWordsPushButton </code><code class="python keyword">=</code> <code class="python plain">QPushButton(</code><code class="python string">"List words"</code><code class="python plain">) </code></div><div class="line number35 index34 alt2"><code class="python plain">listGridLayout.addWidget(listWordsPushButton, </code><code class="python value">3</code><code class="python plain">, </code><code class="python value">1</code><code class="python plain">) </code></div><div class="line number36 index35 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number37 index36 alt2"><code class="python plain">widgetGroupBox </code><code class="python keyword">=</code> <code class="python plain">QGroupBox() </code><code class="python comments"># row 4 </code></div><div class="line number38 index37 alt1"><code class="python plain">mainVerticalLayout.addWidget(widgetGroupBox) </code></div><div class="line number39 index38 alt2"><code class="python plain">widgetGridLayout </code><code class="python keyword">=</code> <code class="python plain">QGridLayout(widgetGroupBox) </code></div><div class="line number40 index39 alt1"><code class="python plain">greatRadioButton </code><code class="python keyword">=</code> <code class="python plain">QRadioButton(</code><code class="python string">"I think this dialog box is great!"</code><code class="python plain">) </code></div><div class="line number41 index40 alt2"><code class="python plain">greatRadioButton.setChecked(</code><code class="python color1">True</code><code class="python plain">) </code></div><div class="line number42 index41 alt1"><code class="python plain">widgetGridLayout.addWidget(greatRadioButton, </code><code class="python value">0</code><code class="python plain">, </code><code class="python value">0</code><code class="python plain">) </code></div><div class="line number43 index42 alt2"><code class="python plain">neutralRadioButton </code><code class="python keyword">=</code> <code class="python plain">QRadioButton(</code><code class="python string">"I am neutral towards this dialog box!"</code><code class="python plain">) </code></div><div class="line number44 index43 alt1"><code class="python plain">widgetGridLayout.addWidget(neutralRadioButton, </code><code class="python value">1</code><code class="python plain">, </code><code class="python value">0</code><code class="python plain">) </code></div><div class="line number45 index44 alt2"><code class="python plain">horribleRadioButton </code><code class="python keyword">=</code> <code class="python plain">QRadioButton(</code><code class="python string">"This dialog box is just horrible!"</code><code class="python plain">) </code></div><div class="line number46 index45 alt1"><code class="python plain">widgetGridLayout.addWidget(horribleRadioButton, </code><code class="python value">2</code><code class="python plain">, </code><code class="python value">0</code><code class="python plain">) </code></div><div class="line number47 index46 alt2"><code class="python plain">checkBox </code><code class="python keyword">=</code> <code class="python plain">QCheckBox(</code><code class="python string">"Check me out"</code><code class="python plain">) </code></div><div class="line number48 index47 alt1"><code class="python plain">widgetGridLayout.addWidget(checkBox, </code><code class="python value">0</code><code class="python plain">, </code><code class="python value">1</code><code class="python plain">)&nbsp; </code></div><div class="line number49 index48 alt2"><code class="python plain">comboBox </code><code class="python keyword">=</code> <code class="python plain">QComboBox() </code></div><div class="line number50 index49 alt1"><code class="python plain">widgetGridLayout.addWidget(comboBox, </code><code class="python value">0</code><code class="python plain">, </code><code class="python value">2</code><code class="python plain">) </code></div><div class="line number51 index50 alt2"><code class="python plain">widgetPushButton </code><code class="python keyword">=</code> <code class="python plain">QPushButton(</code><code class="python string">"I am a push button spanning two columns"</code><code class="python plain">) </code></div><div class="line number52 index51 alt1"><code class="python plain">widgetGridLayout.addWidget(widgetPushButton, </code><code class="python value">2</code><code class="python plain">, </code><code class="python value">1</code><code class="python plain">, </code><code class="python value">1</code><code class="python plain">, </code><code class="python value">2</code><code class="python plain">) </code></div><div class="line number53 index52 alt2"><code class="python spaces">&nbsp;</code>&nbsp;</div><div class="line number54 index53 alt1"><code class="python plain">buttonBox </code><code class="python keyword">=</code> <code class="python plain">QDialogButtonBox() </code><code class="python comments"># row 5 </code></div><div class="line number55 index54 alt2"><code class="python plain">buttonBox.setStandardButtons(QDialogButtonBox.Cancel | QDialogButtonBox.Ok) </code></div><div class="line number56 index55 alt1"><code class="python plain">mainVerticalLayout.addWidget(buttonBox)</code></div></div></td></tr></tbody></table></div></div>

<p>This is the code for creating all the different widgets in our dialog
 box. You should be getting used to reading this kind of code, so we 
will just explain the most important points here:</p>

<ul><li>The overall organization of the dialog box is illustrated in the
 previous figure. The widgets are organized into five rows. This happens
 with a QVBoxLayout that arranges items vertically, each item below the 
previous one. The layout is created in line 1 and by using <em>dialogBox</em> as the parameter of <em>QVBoxLayout(…)</em>,
 we are directly adding it to our dialog box. Each of the five following
 blocks of code create one of the rows in this vertical layout.</li>
	<li>The first block from line 3 to 13 is formed by a single QGroupBox 
item which in turn contains two QLabel and two QEditLine widgets. 
QEditLine widgets are used for allowing the user to enter a single line 
of text. The labels are just for describing what should be entered into 
the respective line edit widget. To make everything look tidy, we use a 
QGridLayout as in Example 1 or the miles-to-kilometers converter to 
arrange these items into two columns with the first one containing the 
labels and the second one containing the line edit widgets.</li>
	<li>The second row created in lines 15 to 22 is formed by two widgets, a
 QLabel that we will use to display an image of the PSU logo and a 
QTextEdit widget that allows for entering multi-line text. The label 
doesn’t have any text assigned. Instead, we use the method <em>setPixmap(…)</em> to assign it an image that will be displayed instead of text. You will need to <a href="https://www.e-education.psu.edu/geog489/sites/www.e-education.psu.edu.geog489/files/downloads/psuPNG.zip">download the Penn State logo here</a> <span class="print-footnote">[2]</span>
 and place it in the same folder as the script to be able to run the 
program. To have these elements placed neatly next to each other, we use
 a QHBoxLayout as in Example 1 for this row and add the two widgets to 
it.</li>
	<li>Row 3 (lines 24 to 35) contains a QListView widget on the left and 
four QPushButtons arranged vertically on the right. The list view is 
intended for displaying a list of items, one per row, and potentially 
allowing the user to select one or multiple of these rows/items. We use 
another grid layout to arrange the items in this row. The grid has two 
columns and three rows (because of the four buttons) and what is new 
here is that we are setting up the list view widget to span all four 
rows. This happens in line 27 by providing two additional parameters to <em>addWidget(…)</em>: 4 for the number of rows the widget should span and 1 for the number of columns.</li>
	<li>For row 4 in lines 37 to 52, we again use a group box and a grid 
layout (3 rows x 4 columns) to arrange the widgets inside the group box,
 and we add a diverse collection of different widgets to it: The first 
column is filled by three QRadioButtons. Radio buttons allow for picking
 one of several choices and it is used here in our dialog box to state 
your opinion on this dialog box ranging from great over neutral to 
horrible. The radio buttons inside the same group box are automatically 
linked so that when you select one, all others will be deselected. In 
addition, we also add a QCheckBox that can be checked and unchecked and a
 QComboBox for selecting one item from multiple choices. Finally we have
 another QPushButton, this time one that spans columns 2 and 3 (see line
 52).</li>
	<li>The last row (lines 54 to 56) contains an “Ok” and a “Cancel” 
button. These are standard elements for a dialog box, so QT provides 
some easy way to set these up in the form of the QDialogButtonBox 
widget. We just have to tell the widget which buttons we want via the <em>setStandardButtons(…)</em> method in line 55.</li>
</ul><p>At this point, you can run the script and it should produce the 
GUI as shown in the previous figure. You can already type things into 
the different edit fields and use the checkbox and radio buttons. The 
other elements still need to be connected to some functionality to serve
 a purpose, which is what we will do next.</p>

<p><strong>Step 3.</strong> The next things we are going to add are two 
functions to put some content into the QListView widget in the third row
 and the QComboBox widget in the fourth row. Since we want to illustrate
 how different GUI elements can be connected to play together, we will 
use the list view to display a list of the words from the text that has 
been entered into the QTextEdit widget in the second row (variable <em>textEdit</em>).
 The combo box we will simply fill with a set of randomly generated 
numbers between 1 and 9. Then we will wire up these widgets as well as 
the push buttons from the third row and the QDialogButtonBox buttons 
from the fifth row.</p>

<p>The following code needs to be placed directly under the comment “# functions for interactions”, <em>before</em> the comment “# functions for modal version”.</p>

<div><div id="highlighter_23025" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">def</code> <code class="python plain">populateListView(): </code></div><div class="line number2 index1 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">words </code><code class="python keyword">=</code> <code class="python plain">textEdit.toPlainText().split() </code></div><div class="line number3 index2 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">m </code><code class="python keyword">=</code> <code class="python plain">QStandardItemModel() </code></div><div class="line number4 index3 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">for</code> <code class="python plain">w </code><code class="python keyword">in</code> <code class="python plain">words: </code></div><div class="line number5 index4 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">item </code><code class="python keyword">=</code> <code class="python plain">QStandardItem(w) </code></div><div class="line number6 index5 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">item.setFlags(Qt.ItemIsUserCheckable | Qt.ItemIsEnabled) </code></div><div class="line number7 index6 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">item.setData(QVariant(Qt.Checked), Qt.CheckStateRole) </code></div><div class="line number8 index7 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">m.appendRow(item) </code></div><div class="line number9 index8 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">listView.setModel(m) </code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="python keyword">def</code> <code class="python plain">populateComboBoxWithRandomNumbers(): </code></div><div class="line number12 index11 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">comboBox.clear() </code></div><div class="line number13 index12 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">for</code> <code class="python plain">i </code><code class="python keyword">in</code> <code class="python functions">range</code><code class="python plain">(</code><code class="python value">5</code><code class="python plain">): </code></div><div class="line number14 index13 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">comboBox.addItem(</code><code class="python functions">str</code><code class="python plain">(random.randrange(</code><code class="python value">10</code><code class="python plain">)))</code></div></div></td></tr></tbody></table></div></div>

<p>The function <em>populateListView</em><em>()</em> calls the method <em>toPlainText()</em>
 of the QTextEdit widget. The QTextEdit widget can contain rich text 
with styling but this method only gives us the plain text without 
styling markups as a string. We then use the string method <em>split() </em>to
 split this string into a list of strings at each space or other 
whitespace symbol. The resulting list of words is stored in variable <em>words</em>.
 The QListView is one of the widgets that needs a model behind it 
meaning some object that stores the actual list data to be displayed. 
Since we just need a list of simple string objects here, we use the 
QStandardItemModel class available for such cases and fill it with 
QStandardItem objects we create, one for each word in our words list 
(lines 3&nbsp;to 8). The&nbsp;model created in this way is then given to
 the <em>setModel()</em> method of the list view, which will then 
display these items. In lines 6&nbsp;and 7 we are setting up the list 
items to have a check box that is originally checked but can be 
unchecked by the user to only select a subset of the items.</p>

<p>Populating the combo box with items the user can pick&nbsp;from is 
much simpler because we can directly add string items to it with the <em>addItem(…)</em> method (line 14). In the <em>populateComboBoxWithRandomNumbers()</em>
 function, we first clear the current content, then use a for-loop that 
creates the random numbers and adds them as string items to the combo 
box.</p>

<p>In addition, you now need to place the following lines of code 
directly under the comment “# connect signals and other 
initializations”, before the line that is already there for opening the 
dialog when the button on the main window is clicked:</p>

<div><div id="highlighter_813783" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">radioButtons </code><code class="python keyword">=</code> <code class="python plain">[ greatRadioButton, neutralRadioButton, horribleRadioButton ] </code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python plain">populateComboBoxWithRandomNumbers() </code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="python plain">buttonBox.accepted.connect(dialogBox.accept) </code></div><div class="line number6 index5 alt1"><code class="python plain">buttonBox.rejected.connect(dialogBox.reject) </code></div><div class="line number7 index6 alt2"><code class="python plain">clearPushButton.clicked.connect(textEdit.clear) </code></div><div class="line number8 index7 alt1"><code class="python plain">hidePushButton.clicked.connect(textEdit.hide) </code></div><div class="line number9 index8 alt2"><code class="python plain">showPushButton.clicked.connect(textEdit.show) </code></div><div class="line number10 index9 alt1"><code class="python plain">listWordsPushButton.clicked.connect(populateListView) </code></div></div></td></tr></tbody></table></div></div>

<p>The first line will only play a role later on, so we ignore it for the moment. In line 3, we call the <em>populateComboBoxWithRandomNumbers()</em>
 function to initialize the combo box so that it contains a list of 
numbers immediately when the dialog box is opened for the first time. 
Next we wire up the “Ok” and “Cancel” buttons for exiting the dialog 
(lines 5 and 6). This is not done via the "clicked" signals of the 
button themselves but via the "accepted" and "rejected" signals of the 
button box that contains them. We connect these signals to the <em>accept()</em> and <em>reject()</em>
 methods of our dialog box, and these will take care of producing the 
corresponding return values or trigger the corresponding signals 
depending on whether we called the dialog box modally or modeless.</p>

<p>Finally, we connect the four push buttons from the third row (lines 7
 to 10). The first three are used to invoke different methods of the 
text edit widget above them: The first clears the text area, the second 
hides the widget, and the third shows it again. The fourth button is set
 up to invoke our <em>populateListView</em><em>()</em> function, so this
 is the button that&nbsp;needs to be clicked for a list of words to show
 up in the list view widget. Go ahead and run the script now. Enter a 
few lines of text into the text edit field and then click the “List 
words” button and observe the list of words that can now be selected via
 the little checkboxes. Then try out the other buttons and the combo 
box.</p>

<p><strong>Step 4.</strong> At this point, we still have a few widgets 
in our dialog box that do not do anything.&nbsp;Let’s make things really
 weird by adding the following commands to the “# connect signals and 
other initializations” section directly following the lines you just 
added and still before the line for opening the dialog when the button 
on the main window is clicked.</p>

<div><div id="highlighter_666851" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">widgetPushButton.pressed.connect(populateComboBoxWithRandomNumbers) </code></div><div class="line number2 index1 alt1"><code class="python plain">firstNameLineEdit.textChanged.connect(checkBox.toggle) </code></div><div class="line number3 index2 alt2"><code class="python plain">lastNameLineEdit.editingFinished.connect(comboBox.showPopup)</code></div></div></td></tr></tbody></table></div></div>

<p>Take a brief moment to read these commands and try to understand the 
functionality they are adding. Do you understand&nbsp;what is happening 
here? The first line is for finally giving some functionality to the 
large push button labeled “I am a push button spanning two row”. We 
connect this button to our function for populating the combo box with 
random numbers. So every time you click the button, the combo box will 
show a different selection of random numbers to pick from. Please note 
that we are not connecting the "clicked<em>"</em> signal here as we did with the other push buttons. Instead, we&nbsp;connect the "pressed<em>"</em>
 signal. What is the difference? Well, the "clicked" signal will only be
 sent out when the mouse button is released, while "pressed" is 
immediately sent when you press down the mouse button. When you run the 
dialog again, check out whether you notice the difference.</p>

<p>In the second and third line, we do something that you would usually 
never do in a dialog box: We connect the "textChanged" signal of the 
line edit widget for entering your first name at the top to the "toggle"
 slot of our checkbox widget in the fourth row. This signal is emitted 
whenever the text in the field is changed, e.g. every time you press a 
key while editing this input field. So if you type in your first name, 
you will see the checkbox constantly toggle between its checked and 
unchecked states. We then connect the "editingFinished" signal of the 
line edit widget for the last name to the "showPopup" slot of our combo 
box for opening the drop down list with the different choices. The 
difference between "textChanged" and "editingFinished" is that 
"editingFinished" will only be emitted when you press TAB or the widget 
loses focus in another way, for instance when you click on a different 
widget. So if you enter your last name and press TAB, you will see the 
drop down list of the combo box appearing. Give this and the other weird
 things we just implemented a try by running the script!</p>

<p><strong>Step 5. </strong>It’s probably best if we stop wiring up our 
dialog box at this point, but feel free to keep experimenting with the 
different signals and connecting them to different slots later on after 
we have completed this example. We now want to focus on what typically 
happens if the dialog box is closed. Right now, nothing will happen 
because we have been connecting the push button on our main window 
directly to the <em>exec_()</em> method, so there is no own code yet 
that would be executed when returning from this method. Typically, you 
will have your own function that calls <em>exec_() </em>and that 
contains some additional code depending on whether the user closed the 
dialog via the “Ok” or “Cancel” button and the state or content of the 
different widgets. For this purpose, please first add the following 
function at the end of the “# functions for interactions” section, 
directly <em>before</em> “# functions for modal version”:</p>

<div><div id="highlighter_826635" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">def</code> <code class="python plain">printResults(): </code></div><div class="line number2 index1 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">for</code> <code class="python plain">rb </code><code class="python keyword">in</code> <code class="python plain">radioButtons: </code></div><div class="line number3 index2 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">if</code> <code class="python plain">rb.isChecked(): </code></div><div class="line number4 index3 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python functions">print</code><code class="python plain">(</code><code class="python string">"Selected opinion: "</code> <code class="python keyword">+</code> <code class="python plain">rb.text()) </code></div><div class="line number5 index4 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python functions">print</code><code class="python plain">(</code><code class="python string">"Combo box has current value "</code> <code class="python keyword">+</code> <code class="python plain">comboBox.currentText()) </code></div><div class="line number6 index5 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python functions">print</code><code class="python plain">(</code><code class="python string">"Checkbox is "</code> <code class="python keyword">+</code> <code class="python plain">(</code><code class="python string">"checked"</code> <code class="python keyword">if</code> <code class="python plain">checkBox.isChecked() </code><code class="python keyword">else</code> <code class="python string">"unchecked"</code><code class="python plain">)) </code></div></div></td></tr></tbody></table></div></div>

<p>Then under "#functions for modal version" insert the following code:</p>

<div><div id="highlighter_743931" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">def</code> <code class="python plain">openDialogModal(): </code></div><div class="line number2 index1 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">result </code><code class="python keyword">=</code> <code class="python plain">dialogBox.exec_() </code></div><div class="line number3 index2 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">if</code> <code class="python plain">result </code><code class="python keyword">=</code><code class="python keyword">=</code> <code class="python plain">QDialog.Accepted: </code></div><div class="line number4 index3 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">printResults() </code></div><div class="line number5 index4 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">else</code><code class="python plain">: </code></div><div class="line number6 index5 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python functions">print</code><code class="python plain">(</code><code class="python string">"Exited dialog via cancel button or closing window"</code><code class="python plain">) </code></div></div></td></tr></tbody></table></div></div>

<p>Finally, change the line in which we set up the main window button to open the dialog from</p>

<div><div id="highlighter_343008" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">button.clicked.connect(dialogBox.exec_()) </code><code class="python comments"># invoke dialog modal version </code></div></div></td></tr></tbody></table></div></div>

<p>to</p>

<div><div id="highlighter_818439" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">button.clicked.connect(openDialogModal) </code><code class="python comments"># invoke dialog modal version </code></div></div></td></tr></tbody></table></div></div>

<p>It should be clear that this last change means that instead of 
opening the dialog box directly, we are now calling our own function <em>openDialogModal()</em>
 when the button on the main window is clicked. Looking at the code of 
that function, the first thing that will happen then is that we call <em>dialogBox</em><em>.exec_()</em> to open the dialog box, but here we also capture its return value in variable <em>result</em>.
 When the dialog box is closed, this return value will tell us whether 
the user accepted the dialog (the user clicked ok) or whether the user 
rejected the dialog (the user clicked cancel or closed the dialog in 
another way). The return value is a number but instead of bothering with
 how accepted and rejected are encoded, we compare <em>result</em> to 
the corresponding constants QDialog.Accepted and QDialog.Rejected 
defined in the QDialog class. When the return value is equal to 
QDialog.Accepted, we call the <em>printResults()</em> function we defined, else we just print out a message to the console saying that the dialog was canceled.</p>

<p>The <em>printResults()</em> function&nbsp;illustrates how you can 
check the content or state of some of the widgets, once the dialog has 
been closed. Even though the dialog is not visible anymore, the widgets 
still exist and we just have to call certain methods to access the 
information about the widgets.</p>

<p>We first look at the three radio buttons to figure out which of the 
three is selected and print out the corresponding text. At the beginning
 of the section “#connect signals and other initializations” in the 
code, we created a list of the three buttons in variable <em>radioButtons</em>. So we can just loop through this list and use the <em>isChecked()</em> method which gives us back a boolean value. If it is True, we get the label of the radio button via its <em>text()</em> method and print out a message about the user’s opinion on our dialog box.</p>

<p>Next, we print out the item currently selected for our combo box: This is retrieved via the combo box’s <em>currentText()</em> method. The state of the check box widget can again be accessed via a method called <em>isChecked()</em>. The other widgets provide similar methods but the general idea should have gotten clear. You already saw the <em>toPlainText() </em>method of QTextEdit being used, and QLineEdit has a method called <em>text()</em>
 to retrieve the text the user entered into the widget. We will leave 
adding additional output for these and the other widgets&nbsp;as an 
“exercise for the reader”. Please run the script and open/close the 
dialog a few times after using the widgets in different ways and observe
 the output produced when dialog is closed.</p>

<p><strong>Change to modeless version. </strong>The last thing we are 
going to do in this section is coming back to the concept of modal and 
modeless dialog boxes and showing how a modeless version of our dialog 
box would look like. Please add the following three functions to the 
section “# functions for modeless version”:</p>

<div><div id="highlighter_174483" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">def</code> <code class="python plain">openDialogModeless():&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number2 index1 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">dialogBox.show() </code></div><div class="line number3 index2 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python functions">print</code><code class="python plain">(</code><code class="python string">"We are already back from calling dialogBox.show()"</code><code class="python plain">) </code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="python keyword">def</code> <code class="python plain">dialogAccepted(): </code></div><div class="line number6 index5 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">printResults() </code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="python keyword">def</code> <code class="python plain">dialogRejected(): </code></div><div class="line number9 index8 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python functions">print</code><code class="python plain">(</code><code class="python string">"Exited dialog via cancel button or closing window"</code><code class="python plain">) </code></div></div></td></tr></tbody></table></div></div>

<p>Now comment out the line</p>

<div><div id="highlighter_27742" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">button.clicked.connect(openDialogModal) </code><code class="python comments"># invoke dialog modal version </code></div></div></td></tr></tbody></table></div></div>

<p>by placing a # in front of it and then insert the following lines below it:</p>

<div><div id="highlighter_372010" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">dialogBox.accepted.connect(dialogAccepted) </code><code class="python comments"># invoke dialog modeless version </code></div><div class="line number2 index1 alt1"><code class="python plain">dialogBox.rejected.connect(dialogRejected) </code></div><div class="line number3 index2 alt2"><code class="python plain">button.clicked.connect(openDialogModeless) </code></div></div></td></tr></tbody></table></div></div>

<p>We suggest you try out this new version immediately and observe the 
change. Note how the main window still can be interacted with after the 
dialog box has been opened. Also note the message in the console “We are
 already back from calling dialogBox.show()” directly appearing after 
the dialog window has appeared. Looking at the code, instead of calling <em>openDialogModal()</em>, we are now calling <em>openDialogModeless()</em>. This function uses <em>dialogBox.show()</em> to open a modeless version of our dialog rather than <em>dialogBox.exec_()</em>
 for the modal version. The message is produced by the print statement 
directly after this call, illustrating that indeed we return immediately
 from the function call, not just when the dialog box is closed.</p>

<p>As a result, we need the two other functions to react when the dialog box has been closed. We connect the function <em>dialogAccepted()</em> to the "accepted" signal of <em>dialogBox</em> that is emitted when the dialog box is closed via the “Ok” button. The function simply calls <em>printResults()</em> and, hence, essentially corresponds to the if-case in function <em>openDialogModal()</em>. Similarly, the <em>dialogRejected</em><em>()</em> function corresponds to the else-case of <em>openDialogModal()</em> and is connected to the "rejected" signal emitted when the dialog is canceled.</p>

<p>As you can see, the change from modal to modeless is straightforward 
and involves changing from working with a return value to working with 
functions for the "accepted" and "rejected" signals. Which version to 
use is mainly a question of whether the dialog box is supposed to get 
important information from the user before being able to continue, or 
whether the dialog is a way for the user to provide input or change 
parameters at any time while the program is executed.</p>

<p>One interesting observation if you revisit the code from the three 
examples in this section, in particular examples 2 and 3, is that while 
the script code can become rather long, most of this code is for 
creating the different widgets and arranging them in a nice way. 
Compared to that, there is not much code needed for wiring up the 
widgets and implementing the actual functionality. Admittedly, our toy 
examples didn’t have a lot of functionality included, but it still 
should be obvious that a lot of time and effort could be saved by using 
visual tools for producing the GUI layouts in an intuitive way and then 
automatically turning them into Python code. This is exactly what the 
next section will be about.</p>
</div></div></div>  </div>
</div>
    <div class="print-footer">
</div>
    <hr class="print-hr">
          <div class="print-source_url">
        <strong>Source URL:</strong> https://www.e-education.psu.edu/geog489/node/2232      </div>
        <div class="print-links"><p><strong>Links</strong><br>[1] https://www.e-education.psu.edu/geog489/sites/www.e-education.psu.edu.geog489/files/downloads/QT_Example3_modal.zip<br>
[2] https://www.e-education.psu.edu/geog489/sites/www.e-education.psu.edu.geog489/files/downloads/psuPNG.zip<br>
</p></div>
    <script type="text/javascript" src="2.6.1.3%20Example%203_arquivos/syntaxhighlighter.js"></script>
  

</body></html>