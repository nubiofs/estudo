<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN" "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" version="XHTML+RDFa 1.0" dir="ltr" class="js"><head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="Generator" content="Drupal 7 (http://drupal.org)">
    <!-- base href="https://www.e-education.psu.edu/geog489/node/2306" -->
    <title>4.9 Inheritance in GUI Programming</title>
    <script type="text/javascript" src="4.9%20Inheritance%20in%20GUI%20Programming_arquivos/jquery.js"></script>
<script type="text/javascript" src="4.9%20Inheritance%20in%20GUI%20Programming_arquivos/jquery-extend-3.js"></script>
<script type="text/javascript" src="4.9%20Inheritance%20in%20GUI%20Programming_arquivos/jquery_002.js"></script>
<script type="text/javascript" src="4.9%20Inheritance%20in%20GUI%20Programming_arquivos/drupal.js"></script>
<script type="text/javascript" src="4.9%20Inheritance%20in%20GUI%20Programming_arquivos/shCore.js"></script>
<script type="text/javascript" src="4.9%20Inheritance%20in%20GUI%20Programming_arquivos/shBrushBash.js"></script>
<script type="text/javascript" src="4.9%20Inheritance%20in%20GUI%20Programming_arquivos/shBrushJScript.js"></script>
<script type="text/javascript" src="4.9%20Inheritance%20in%20GUI%20Programming_arquivos/shBrushJson.js"></script>
<script type="text/javascript" src="4.9%20Inheritance%20in%20GUI%20Programming_arquivos/shBrushPhp.js"></script>
<script type="text/javascript" src="4.9%20Inheritance%20in%20GUI%20Programming_arquivos/shBrushPowerShell.js"></script>
<script type="text/javascript" src="4.9%20Inheritance%20in%20GUI%20Programming_arquivos/shBrushPython.js"></script>
<script type="text/javascript" src="4.9%20Inheritance%20in%20GUI%20Programming_arquivos/shBrushVb.js"></script>
<script type="text/javascript" src="4.9%20Inheritance%20in%20GUI%20Programming_arquivos/printable_links.js"></script>
<script type="text/javascript" src="4.9%20Inheritance%20in%20GUI%20Programming_arquivos/toggler.js"></script>
<script type="text/javascript" src="4.9%20Inheritance%20in%20GUI%20Programming_arquivos/lti.js"></script>
<script type="text/javascript" src="4.9%20Inheritance%20in%20GUI%20Programming_arquivos/h5p-resizer.js"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/geog489\/","pathPrefix":"","ajaxPageState":{"theme":"gis","theme_token":"MIi1Ej2JJQbFGUetjYVFJJJDiEokUC7zy0QCY6LRdfM","js":{"sites\/all\/modules\/jquery_update\/replace\/jquery\/1.7\/jquery.min.js":1,"misc\/jquery-extend-3.4.0.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shCore.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushBash.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushJScript.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushJson.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushPhp.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushPowerShell.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushPython.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushVb.js":1,"sites\/all\/modules\/custom_js_libraries\/printable_links\/printable_links.js":1,"sites\/all\/modules\/custom_js_libraries\/toggler\/toggler.js":1,"sites\/all\/themes\/gis\/lti.js":1,"sites\/all\/themes\/gis\/..\/..\/modules\/h5p\/library\/js\/h5p-resizer.js":1}}});
//--><!]]>
</script>
        <meta name="robots" content="noindex, nofollow">        <style type="text/css" media="all">
@import url("https://www.e-education.psu.edu/geog489/modules/system/system.base.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/modules/system/system.menus.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/modules/system/system.messages.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/modules/system/system.theme.css?psbola");
</style>
<style type="text/css" media="all">
@import url("https://www.e-education.psu.edu/geog489/modules/book/book.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/modules/field/theme/field.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/modules/node/node.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/modules/quiz/quiz.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/modules/search/search.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/modules/user/user.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/modules/extlink/extlink.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/modules/views/css/views.css?psbola");
</style>
<link type="text/css" rel="stylesheet" href="4.9%20Inheritance%20in%20GUI%20Programming_arquivos/css_002.css" media="all">
<link type="text/css" rel="stylesheet" href="4.9%20Inheritance%20in%20GUI%20Programming_arquivos/css_003.css" media="all">
<link type="text/css" rel="stylesheet" href="4.9%20Inheritance%20in%20GUI%20Programming_arquivos/css.css" media="all">
<style type="text/css" media="all">
@import url("https://www.e-education.psu.edu/geog489/sites/all/modules/hidden_nodes/hidden_nodes.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/modules/ctools/css/ctools.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/libraries/syntaxhighlighter_3.0.83/styles/shCore.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/libraries/syntaxhighlighter_3.0.83/styles/shThemeDefault.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/modules/taxonomy_access/taxonomy_access.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/modules/print/print_ui/css/print_ui.theme.css?psbola");
@import url("https://www.e-education.psu.edu/geog489/sites/all/modules/print/css/print.css?psbola");
</style>
  </head>
  <body>
            <div class="print-site_name">Published on <em class="placeholder">GEOG 489: Advanced Python Programming for GIS</em> (<a href="https://www.e-education.psu.edu/geog489">https://www.e-education.psu.edu/geog489</a>)</div>
    <p>
    </p><div class="print-breadcrumb"><a href="https://www.e-education.psu.edu/geog489/home.html">Home</a> &gt; <a href="https://www.e-education.psu.edu/geog489/node/1405">GEOG 489</a> &gt; <a href="https://www.e-education.psu.edu/geog489/l4.html">Lesson 4 Object-Oriented Programming in Python and QGIS Development</a> &gt; 4.9 Inheritance in GUI Programming</div>
    <hr class="print-hr">
        <div class="print-content"><div id="node-2306" class="section-3">
  <h1 class="book-heading">4.9 Inheritance in GUI Programming</h1>
  <div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even"><p>Inheritance
 also plays an important role in GUI programming. For instance, the 
widget classes of a GUI library are typically organized in a class 
hierarchy with some basic class like QWidget towards the top and more 
specialized widgets like buttons and dialog boxes derived from it. Other
 parts of the GUI library like the event system are also typically 
organized hierarchically. Have a quick look at the <a href="http://www.kuqin.com/qtdocument/classchart.html">QT class chart</a> <span class="print-footnote">[1]</span>&nbsp;and
 see how, for instance, the QPushButton is a subclass of QWidget with an
 intermediate class QButton in between from which also other types of 
buttons like QCheckbox and QRadioButton are derived.</p>

<p>Let’s think back to the GUI programming sections from Lesson 2: There
 we often created widgets, stored them in a variable, and then made 
changes to the widgets like changing their properties and adding child 
widgets from the main part of the code. For instance, in the 
miles-to-kilometers conversion tool from Section 2.5.2.3, we created a 
QWidget for the main window and then changed its properties and added 
the child widgets for the other GUI elements&nbsp;like this:</p>

<div><div id="highlighter_493446" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">rootWindow </code><code class="python keyword">=</code> <code class="python plain">QWidget() </code></div><div class="line number2 index1 alt1"><code class="python plain">rootWindow.setWindowTitle(</code><code class="python string">"Miles to kilometers"</code><code class="python plain">) </code></div><div class="line number3 index2 alt2"><code class="python plain">rootWindow.resize(</code><code class="python value">500</code><code class="python plain">, </code><code class="python value">200</code><code class="python plain">) </code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="python plain">gridLayout </code><code class="python keyword">=</code> <code class="python plain">QGridLayout(rootWindow) </code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="python plain">labelMiles </code><code class="python keyword">=</code> <code class="python plain">QLabel(</code><code class="python string">'Distance in miles:'</code><code class="python plain">) </code></div><div class="line number8 index7 alt1"><code class="python plain">gridLayout.addWidget(labelMiles, </code><code class="python value">0</code><code class="python plain">, </code><code class="python value">0</code><code class="python plain">)</code></div></div></td></tr></tbody></table></div></div>

<p>… and so on. We mainly took this approach because at that point we 
hadn’t covered the fundamentals of object-oriented programming and 
inheritance yet and our examples were still rather simple. Typically, 
what one would rather do is use inheritance to create a new widget class
 derived from an existing widget class. This new class then implements 
some specialized behavior compared to its base class and encapsulates 
everything related to this kind of widget in a single class definition. 
For instance, for the conversion tool, it makes sense to define a new 
class that is derived from QWidget like this:</p>

<div><div id="highlighter_503483" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">from</code> <code class="python plain">PyQt5.QtWidgets </code><code class="python keyword">import</code> <code class="python plain">QApplication, QWidget, QLabel, QGridLayout, QLineEdit, QPushButton </code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python keyword">class</code> <code class="python plain">ConverterWidget(QWidget): </code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code> <code class="python plain">__init__(</code><code class="python color1">self</code><code class="python plain">): </code></div><div class="line number6 index5 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python functions">super</code><code class="python plain">(ConverterWidget,</code><code class="python color1">self</code><code class="python plain">).__init__() </code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.setWindowTitle(</code><code class="python string">"Miles to kilometers"</code><code class="python plain">) </code></div><div class="line number9 index8 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.resize(</code><code class="python value">500</code><code class="python plain">, </code><code class="python value">200</code><code class="python plain">) </code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.gridLayout </code><code class="python keyword">=</code> <code class="python plain">QGridLayout(</code><code class="python color1">self</code><code class="python plain">) </code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.labelMiles </code><code class="python keyword">=</code> <code class="python plain">QLabel(</code><code class="python string">'Distance in miles:'</code><code class="python plain">) </code></div><div class="line number14 index13 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.gridLayout.addWidget(</code><code class="python color1">self</code><code class="python plain">.labelMiles, </code><code class="python value">0</code><code class="python plain">, </code><code class="python value">0</code><code class="python plain">) </code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.labelKm </code><code class="python keyword">=</code> <code class="python plain">QLabel(</code><code class="python string">'Distance in kilometers:'</code><code class="python plain">) </code></div><div class="line number17 index16 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.gridLayout.addWidget(</code><code class="python color1">self</code><code class="python plain">.labelKm, </code><code class="python value">2</code><code class="python plain">, </code><code class="python value">0</code><code class="python plain">) </code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.entryMiles </code><code class="python keyword">=</code> <code class="python plain">QLineEdit() </code></div><div class="line number20 index19 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.gridLayout.addWidget(</code><code class="python color1">self</code><code class="python plain">.entryMiles, </code><code class="python value">0</code><code class="python plain">, </code><code class="python value">1</code><code class="python plain">) </code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.entryKm </code><code class="python keyword">=</code> <code class="python plain">QLineEdit() </code></div><div class="line number23 index22 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.gridLayout.addWidget(</code><code class="python color1">self</code><code class="python plain">.entryKm, </code><code class="python value">2</code><code class="python plain">, </code><code class="python value">1</code><code class="python plain">) </code></div><div class="line number24 index23 alt1">&nbsp;</div><div class="line number25 index24 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.convertButton </code><code class="python keyword">=</code> <code class="python plain">QPushButton(</code><code class="python string">'Convert'</code><code class="python plain">) </code></div><div class="line number26 index25 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.gridLayout.addWidget(</code><code class="python color1">self</code><code class="python plain">.convertButton, </code><code class="python value">1</code><code class="python plain">, </code><code class="python value">1</code><code class="python plain">) </code></div><div class="line number27 index26 alt2">&nbsp;</div><div class="line number28 index27 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.convertButton.clicked.connect(</code><code class="python color1">self</code><code class="python plain">.convert) </code></div><div class="line number29 index28 alt2">&nbsp;</div><div class="line number30 index29 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code> <code class="python plain">convert(</code><code class="python color1">self</code><code class="python plain">): </code></div><div class="line number31 index30 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">miles </code><code class="python keyword">=</code> <code class="python functions">float</code><code class="python plain">(</code><code class="python color1">self</code><code class="python plain">.entryMiles.text()) </code></div><div class="line number32 index31 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.entryKm.setText(</code><code class="python functions">str</code><code class="python plain">(miles </code><code class="python keyword">*</code> <code class="python value">1.60934</code><code class="python plain">)) </code></div><div class="line number33 index32 alt2">&nbsp;</div><div class="line number34 index33 alt1"><code class="python plain">app </code><code class="python keyword">=</code> <code class="python plain">QApplication([]) </code></div><div class="line number35 index34 alt2"><code class="python plain">converter </code><code class="python keyword">=</code> <code class="python plain">ConverterWidget() </code></div><div class="line number36 index35 alt1">&nbsp;</div><div class="line number37 index36 alt2"><code class="python plain">converter.show() </code></div><div class="line number38 index37 alt1"><code class="python plain">app.exec_() </code></div></div></td></tr></tbody></table></div></div>

<p>In line 3, we say that our new class ConverterWidget should be 
derived from the PyQT5 class QWidget, meaning it will inherit all 
instance variables and methods (like <em>setWindowTitle(…)</em> and <em>resize(…)</em>)
 from QWidget. In the constructor of our class, we first call the 
constructor of the base class (line 6) and then set up the GUI of our 
widget similar to how we did this before from the main part of the code.
 However, now we store the different child widgets in instance variables
 (e.g., self.gridLayout) and invoke methods as <em>self.setWindowTitle(…)</em>, for instance, because these are now inherited methods of this new class. The <em>convert()</em>&nbsp;event
 handler function has become a method of our new class and we connect it
 to the “clicked” signal of the button in line 28&nbsp;using the prefix 
“self.” because it is a method of the class we are defining here. The 
main code of the program following the class definition has become very 
simple now: We just create an instance of our new class ConverterWidget 
in variable <em>converter </em>in line 35<em>&nbsp;</em>and then call its <em>show()</em> method (inherited from QWidget) to make the widget show up on the screen.</p>

<p>As a result of defining a new widget class via inheritance, we now 
have everything related to our conversion widget nicely encapsulated in 
the class definition, which also helps in keeping the main code of our 
script as simple and clean as possible. If we need a conversion widget 
as part of another project, all we would need to move over to this 
project is the class definition of ConverterWidget. Another advantage 
that is not immediately obvious in this toy example is the following: 
Think of situations where you might need several instances of the 
widget. In the original version you would have to repeat the code for 
producing the converter widget. Here you can simply create another 
instance of the ConverterWidget class by repeating the command from line
 35 and store the created widget in a different variable.</p>
</div></div></div>  <div id="node-2307" class="section-4">
  <h1 class="book-heading">4.9.1 Another example involving painting on PyQ5 widgets</h1>
  <div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even"><p>Understanding
 this idea of building reusable GUI components via inheritance is so 
important that we should look at another example. While doing so, we 
will also learn how you can actually programmatically draw on a widget 
to display your own content. What we are going to do is take the classes
 from our Geometry hierarchy from the previous section and create a 
widget that actually draws the instances of the classes we have stored 
in a list to the screen. To make this a bit more interesting, we also 
want all the objects of the different geometry types to have a “color” 
attribute that determines in which color the object should be drawn. 
Before we look at what changes need to be made to the different geometry
 classes, here is a quick introduction to drawing with PyQt5.</p>

<p>Every widget in QT5 has a method called <em>paintEvent(…)</em> that 
is called when the widget needs to be drawn (for instance, when its 
drawn for the first time or when the size of the widget has changed). 
The only parameter passed to this method is an event object that can be 
used to get the current dimensions of the content area that we can draw 
on by calling its <em>rect</em><em>()</em> method. That means when we 
want to use a widget for drawing something on it, we derive a new class 
from the respective widget class and overwrite the <em>paintEvent(…)</em>&nbsp;method
 with our own implementation that takes care of the drawing. To do the 
actual drawing, we need to create an object of the class QPainter and 
then use the drawing methods it provides. Here is a simple example; the 
details will be explained below:</p>

<div><div id="highlighter_893648" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">import</code> <code class="python plain">sys </code></div><div class="line number2 index1 alt1"><code class="python keyword">from</code> <code class="python plain">PyQt5 </code><code class="python keyword">import</code> <code class="python plain">QtGui, QtWidgets </code></div><div class="line number3 index2 alt2"><code class="python keyword">from</code> <code class="python plain">PyQt5.QtCore </code><code class="python keyword">import</code> <code class="python plain">Qt, QPoint </code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="python keyword">class</code> <code class="python plain">MyWidget(QtWidgets.QWidget): </code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code> <code class="python plain">paintEvent(</code><code class="python color1">self</code><code class="python plain">, event): </code></div><div class="line number8 index7 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">qp </code><code class="python keyword">=</code> <code class="python plain">QtGui.QPainter() </code></div><div class="line number9 index8 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">qp.begin(</code><code class="python color1">self</code><code class="python plain">) </code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">qp.setPen(QtGui.QColor(</code><code class="python value">200</code><code class="python plain">,</code><code class="python value">0</code><code class="python plain">,</code><code class="python value">0</code><code class="python plain">)) </code></div><div class="line number12 index11 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">qp.drawText(</code><code class="python value">20</code><code class="python plain">,</code><code class="python value">20</code><code class="python plain">, </code><code class="python string">"Text at fixed coordinates"</code><code class="python plain">) </code></div><div class="line number13 index12 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">qp.drawText(event.rect(), Qt.AlignCenter, </code><code class="python string">"Text centerd in the drawing area"</code><code class="python plain">) </code></div><div class="line number14 index13 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">qp.setPen(QtGui.QPen(Qt.darkGreen, </code><code class="python value">4</code><code class="python plain">)) </code></div><div class="line number15 index14 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">qp.drawEllipse(QPoint(</code><code class="python value">50</code><code class="python plain">,</code><code class="python value">60</code><code class="python plain">),</code><code class="python value">30</code><code class="python plain">,</code><code class="python value">30</code><code class="python plain">) </code></div><div class="line number16 index15 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">qp.setPen(QtGui.QPen(Qt.blue, </code><code class="python value">2</code><code class="python plain">, join </code><code class="python keyword">=</code> <code class="python plain">Qt.MiterJoin)) </code></div><div class="line number17 index16 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">qp.drawRect(</code><code class="python value">20</code><code class="python plain">,</code><code class="python value">60</code><code class="python plain">,</code><code class="python value">50</code><code class="python plain">,</code><code class="python value">80</code><code class="python plain">) </code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">qp.end() </code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="python plain">app </code><code class="python keyword">=</code> <code class="python plain">QtWidgets.QApplication(sys.argv) </code></div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2"><code class="python plain">window </code><code class="python keyword">=</code> <code class="python plain">MyWidget() </code></div><div class="line number24 index23 alt1"><code class="python plain">window.show() </code></div><div class="line number25 index24 alt2">&nbsp;</div><div class="line number26 index25 alt1"><code class="python plain">sys.exit(app.exec_())</code></div></div></td></tr></tbody></table></div></div>

<p>When you run this small script, you should see the following window on your screen:</p>

<div class="img-center"><img alt="Window with “text at fixed coordinates” in left corner above a green circle intersecting a blue rectangle &amp; “text centered in drawing area”" src="4.9%20Inheritance%20in%20GUI%20Programming_arquivos/drawing_example.jpg"> &nbsp; &nbsp; &nbsp;
	<div class="img-caption">Fig 4.19 Window produced by the previous code example illustrating some drawing methods of QPainter</div>
</div>

<p>Let’s look at the coarse structure first: We are defining a new class derived from QWidget and only overwrite the <em>paintEvent(…)</em>
 method, meaning in all other aspects this widget will behave like an 
instance of QWidget. In the main code, we simply create an instance of 
our new widget class and make it show up on the screen. Now, let’s look 
at the body of method <em>paintEvent(…)</em>: The first thing to note 
here is that all drawing needs to be preceded by the creation of the 
QPainter object (line 8) and the call of its <em>begin(…)</em> method 
using “self” as the parameter standing for the widget object itself 
because that is what we want to draw on (line 9). To conclude the 
drawing, we need to call the <em>end()</em> method of the QPainter object (line 19).</p>

<p>Next, let us look at the methods of the QPainter object we are 
invoking that all start with “draw…”. These are the methods provided by 
QPainter to draw different kinds of entities like text, circles or 
ellipses, rectangles, images, etc. We here use the method <em>drawText(…)</em>
 twice to produce the two different lines of text (lines 12&nbsp;and 
13). The difference between the two calls is that in the first one we 
use absolute coordinates, so the text will be drawn at pixel coordinates
 20, 20 counting from the top left corner of the widget’s content area. 
The second call takes a rectangle (class QRectF) as the first parameter 
and then draws the text within this rectangle based on the additional 
text options given as the second parameter which here says&nbsp;that the
 text should be centered within the rectangle. This is an example where a
 class provides several methods with the same name but different 
parameters, something that is called <em>overloading</em>. If you check out the <a href="http://pyqt.sourceforge.net/Docs/PyQt4/qpainter.html">documentation of QPainter</a> <span class="print-footnote">[2]</span>,
 you will see that most methods come in different versions. Now go ahead
 and resize the window a bit and see how the text produced by the first 
call always remains at the same absolute position, while that from the 
second call always stays centered within the available area.</p>

<p>In line 15, we use the method <em>drawEllipse(…)</em> to produce the 
circle. There is no special circle drawing method, so we use this one 
and then provide the same number for the two radii. To draw the 
rectangle, we use the method <em>drawRect(…)</em> in the version that takes the coordinates of the corner plus width and height values as parameters.</p>

<p>The remaining calls of methods of the QPainter object are there to 
affect the way the objects are drawn, e.g. their color. Colors inPyQt5 
are represented by instances of the class QColor. In line 11, we create a
 new QColor object by providing values between 0 and 255 for the color’s
 red, green, and blue values. Since the red value is 200 and both green 
and blue are zero, the overall color will be the kind of red that the 
text appears in. QT5 also has a number of predefined colors that we are 
using in lines 14&nbsp;(Qt.darkGreen) and 16&nbsp;(Qt.blue).</p>

<p>QPainter uses objects of class <a href="http://pyqt.sourceforge.net/Docs/PyQt4/qpen.html">QPen</a> <span class="print-footnote">[3]</span> and <a href="http://pyqt.sourceforge.net/Docs/PyQt4/qbrush.html">QBrush</a> <span class="print-footnote">[4]</span>
 to draw the boundary and inside of a shape. In line 11, it is stated 
that a pen with red color should be used for the following drawing 
operations. As a result, both text lines appear in red. In line 14, we 
create a new QPen object to be used by the QPainter and specify that the
 color should be dark green, and the line width should be 4. This is 
used for drawing the circle. In line 16, we do the same with color blue 
and line width 2, and, in addition, we say that sharp corners should be 
used for the connection between to adjacent line segments of the shape’s
 border. This is used for drawing the rectangle. We won’t go further 
into the details of the different pen and brush properties here but the 
documentation of the QPen and QBrush classes provides some more examples
 and explanations. In addition, you will see more use cases in the 
walkthrough in the next section.</p>
</div></div></div>  </div>
<div id="node-2308" class="section-4">
  <h1 class="book-heading">4.9.2 Adapting the geometry example</h1>
  <div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even"><p>We are now going to revist the geometry example we saved in Section 4.8.</p>

<p>To prepare our geometry classes to be drawn on the screen, we first need&nbsp;to modify their definitions by</p>

<ol><li>introducing&nbsp;the new “color” instance variable for storing a QColor object,</li>
	<li>defining&nbsp;a method called “paint” for drawing the respective 
object on a screen. This method will have one parameter called “painter”
 for passing an object of the QPainter class that can be used for 
drawing onto the widget.</li>
</ol><p>As an exercise, think about where in the class hierarchy you 
would need to make changes to address points (1) and (2). Once you have 
thought about this for a bit, read on.</p>

<p>The new attribute “color” is something that all our geometry classes 
have in common. Therefore, the best place to introduce it is in the root
 class Geometry. In all subclasses (Circle, Rectangle, Square), you then
 only have to adapt the constructor to include an additional keyword 
parameter for the color. Regarding point (2): As we saw above, drawing a
 circle or a rectangle requires different methods of the QPainter object
 to be called with different kinds of parameters specific to the 
particular geometry type. Therefore, we define the method <em>paint(…)</em>
 in class Geometry but then overwrite it in the subclasses Circle and 
Rectangle. For class Square, the way it is based on class Rectangle 
allows us to directly use the implementation of <em>paint(…)</em> from 
the Rectangle class, so we do not have to overwrite the method in the 
definition of Square. Here are the changes made to the four classes.</p>

<p>Class Geometry: As discussed, in class Geometry we introduce the 
“color” variable, so we need to change the constructor a bit. In 
addition, we add the method <em>paint(…)</em> but without an implementation. The rest of the definition remains unchanged:</p>

<div><div id="highlighter_860259" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">class</code> <code class="python plain">Geometry: </code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code> <code class="python plain">__init__(</code><code class="python color1">self</code><code class="python plain">, x </code><code class="python keyword">=</code> <code class="python value">0.0</code><code class="python plain">, y </code><code class="python keyword">=</code> <code class="python value">0.0</code><code class="python plain">, color </code><code class="python keyword">=</code> <code class="python plain">Qt.black): </code></div><div class="line number4 index3 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.x </code><code class="python keyword">=</code> <code class="python plain">x </code></div><div class="line number5 index4 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.y </code><code class="python keyword">=</code> <code class="python plain">y </code></div><div class="line number6 index5 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.color </code><code class="python keyword">=</code> <code class="python plain">color </code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">...</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code> <code class="python plain">paint(</code><code class="python color1">self</code><code class="python plain">, painter): </code></div><div class="line number11 index10 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">pass</code></div></div></td></tr></tbody></table></div></div>

<p>Classes Circle and Rectangle: For the classes Circle and Rectangle, 
we adapt the constructors to also include a keyword argument for 
“color”. The color is directly passed on to the constructor of the base 
class, while the rest of the constructor remains unchanged. We then 
provide a definition for method <em>paint(…)</em> that sets up the Pen object to use the right color and then uses the corresponding QPainter method for drawing the object (<em>drawEllipse(…)</em> for class Circle and <em>drawRect(…)</em>
 for class Rectangle) providing the different instance variables as 
parameters. The rest of the respective class definitions stays the same:</p>

<div><div id="highlighter_693572" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">class</code> <code class="python plain">Circle (Geometry): </code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code> <code class="python plain">__init__(</code><code class="python color1">self</code><code class="python plain">, x </code><code class="python keyword">=</code> <code class="python value">0.0</code><code class="python plain">, y </code><code class="python keyword">=</code> <code class="python value">0.0</code><code class="python plain">, radius </code><code class="python keyword">=</code> <code class="python value">1.0</code><code class="python plain">, color </code><code class="python keyword">=</code> <code class="python plain">Qt.black): </code></div><div class="line number4 index3 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python functions">super</code><code class="python plain">(Circle,</code><code class="python color1">self</code><code class="python plain">).__init__(x,y,color) </code></div><div class="line number5 index4 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.radius </code><code class="python keyword">=</code> <code class="python plain">radius </code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">...</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code> <code class="python plain">paint(</code><code class="python color1">self</code><code class="python plain">, painter): </code></div><div class="line number10 index9 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">painter.setPen(QtGui.QPen(</code><code class="python color1">self</code><code class="python plain">.color, </code><code class="python value">2</code><code class="python plain">)) </code></div><div class="line number11 index10 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">painter.drawEllipse(QPoint(</code><code class="python color1">self</code><code class="python plain">.x, </code><code class="python color1">self</code><code class="python plain">.y), </code><code class="python color1">self</code><code class="python plain">.radius, </code><code class="python color1">self</code><code class="python plain">.radius) </code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="python keyword">class</code> <code class="python plain">Rectangle(Geometry): </code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code> <code class="python plain">__init__(</code><code class="python color1">self</code><code class="python plain">, x </code><code class="python keyword">=</code> <code class="python value">0.0</code><code class="python plain">, y </code><code class="python keyword">=</code> <code class="python value">0.0</code><code class="python plain">, width </code><code class="python keyword">=</code> <code class="python value">1.0</code><code class="python plain">, height </code><code class="python keyword">=</code> <code class="python value">1.0</code><code class="python plain">, color </code><code class="python keyword">=</code> <code class="python plain">Qt.black): </code></div><div class="line number17 index16 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python functions">super</code><code class="python plain">(Rectangle,</code><code class="python color1">self</code><code class="python plain">).__init__(x,y, color) </code></div><div class="line number18 index17 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.width </code><code class="python keyword">=</code> <code class="python plain">width </code></div><div class="line number19 index18 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.height </code><code class="python keyword">=</code> <code class="python plain">height </code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">...</code></div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code> <code class="python plain">paint(</code><code class="python color1">self</code><code class="python plain">, painter): </code></div><div class="line number24 index23 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">painter.setPen(QtGui.QPen(</code><code class="python color1">self</code><code class="python plain">.color, </code><code class="python value">2</code><code class="python plain">,&nbsp; join </code><code class="python keyword">=</code> <code class="python plain">Qt.MiterJoin)) </code></div><div class="line number25 index24 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">painter.drawRect(</code><code class="python color1">self</code><code class="python plain">.x, </code><code class="python color1">self</code><code class="python plain">.y, </code><code class="python color1">self</code><code class="python plain">.width, </code><code class="python color1">self</code><code class="python plain">.height)</code></div></div></td></tr></tbody></table></div></div>

<p>Class Square: For the Square class, we just adapt the constructor to include the color, the rest remains unchanged:</p>

<div><div id="highlighter_360882" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">class</code> <code class="python plain">Square(Rectangle): </code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code> <code class="python plain">__init__(</code><code class="python color1">self</code><code class="python plain">, x </code><code class="python keyword">=</code> <code class="python value">0.0</code><code class="python plain">, y </code><code class="python keyword">=</code> <code class="python value">0.0</code><code class="python plain">, sideLength </code><code class="python keyword">=</code> <code class="python value">1.0</code><code class="python plain">, color </code><code class="python keyword">=</code> <code class="python plain">Qt.black): </code></div><div class="line number4 index3 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python functions">super</code><code class="python plain">(Square,</code><code class="python color1">self</code><code class="python plain">).__init__(x, y, sideLength, sideLength, color)</code></div></div></td></tr></tbody></table></div></div>

<p>Now that we have the geometry classes prepared, let us again derive a
 specialized class GeometryDrawingWidget from QWidget that stores a list
 of geometry objects and in the <em>paintEvent(…)</em> method sets up a QPainter object for drawing on its content area and then invokes the <em>paint(…)</em>
 methods for all objects from the list. This is bascially the same thing
 we did towards the end of Section 4.7.2 but now happens inside the new 
widget class. The list of objects is supposed to be given as a parameter
 to the constructor of GeometryDrawingWidget:</p>

<div><div id="highlighter_677649" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">import</code> <code class="python plain">math, sys </code></div><div class="line number2 index1 alt1"><code class="python keyword">from</code> <code class="python plain">PyQt5 </code><code class="python keyword">import</code> <code class="python plain">QtGui, QtWidgets </code></div><div class="line number3 index2 alt2"><code class="python keyword">from</code> <code class="python plain">PyQt5.QtCore </code><code class="python keyword">import</code> <code class="python plain">Qt, QPoint</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="python keyword">class</code> <code class="python plain">GeometryDrawingWidget(QtWidgets.QWidget): </code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code> <code class="python plain">__init__(</code><code class="python color1">self</code><code class="python plain">, objects): </code></div><div class="line number8 index7 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python functions">super</code><code class="python plain">(GeometryDrawingWidget,</code><code class="python color1">self</code><code class="python plain">).__init__() </code></div><div class="line number9 index8 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.objectsToDraw </code><code class="python keyword">=</code> <code class="python plain">objects </code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code> <code class="python plain">paintEvent(</code><code class="python color1">self</code><code class="python plain">, event): </code></div><div class="line number12 index11 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">qp </code><code class="python keyword">=</code> <code class="python plain">QtGui.QPainter() </code></div><div class="line number13 index12 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">qp.begin(</code><code class="python color1">self</code><code class="python plain">) </code></div><div class="line number14 index13 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">for</code> <code class="python plain">obj </code><code class="python keyword">in</code> <code class="python color1">self</code><code class="python plain">.objectsToDraw: </code></div><div class="line number15 index14 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">obj.paint(qp) </code></div><div class="line number16 index15 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">qp.end()</code></div></div></td></tr></tbody></table></div></div>

<p>Finally, we create another new class called MyMainWindow that is 
derived from QMainWindow for the main window containing the drawing 
widget. The constructor takes the list of objects to be drawn and then 
creates a new instance of GeometryDrawingWidget passing the object list 
as a parameter and makes it its central widget in line 6:</p>

<div><div id="highlighter_952542" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">class</code> <code class="python plain">MyMainWindow(QtWidgets.QMainWindow): </code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">def</code> <code class="python plain">__init__(</code><code class="python color1">self</code><code class="python plain">, objects): </code></div><div class="line number4 index3 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python functions">super</code><code class="python plain">(MyMainWindow, </code><code class="python color1">self</code><code class="python plain">).__init__() </code></div><div class="line number5 index4 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.resize(</code><code class="python value">300</code><code class="python plain">,</code><code class="python value">300</code><code class="python plain">) </code></div><div class="line number6 index5 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python color1">self</code><code class="python plain">.setCentralWidget(GeometryDrawingWidget(objects))</code></div></div></td></tr></tbody></table></div></div>

<p>In the main code of the script, we then simply create an instance of 
MyMainWindow with a predefined list of geometry objects and then call 
its <em>show()</em> method to make the window appear on the screen:</p>

<div><div id="highlighter_415774" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">app </code><code class="python keyword">=</code> <code class="python plain">QtWidgets.QApplication(sys.argv) </code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python plain">objects </code><code class="python keyword">=</code> <code class="python plain">[ Circle(</code><code class="python value">93</code><code class="python plain">,</code><code class="python value">83</code><code class="python plain">,</code><code class="python value">45</code><code class="python plain">, Qt.darkGreen), Rectangle(</code><code class="python value">10</code><code class="python plain">,</code><code class="python value">10</code><code class="python plain">,</code><code class="python value">80</code><code class="python plain">,</code><code class="python value">50</code><code class="python plain">, QtGui.QColor(</code><code class="python value">200</code><code class="python plain">, </code><code class="python value">0</code><code class="python plain">, </code><code class="python value">250</code><code class="python plain">)), Square(</code><code class="python value">30</code><code class="python plain">,</code><code class="python value">70</code><code class="python plain">,</code><code class="python value">38</code><code class="python plain">, Qt.blue)] </code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="python plain">mainWindow </code><code class="python keyword">=</code> <code class="python plain">MyMainWindow (objects) </code></div><div class="line number6 index5 alt1"><code class="python plain">mainWindow.show() </code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="python plain">sys.exit(app.exec_())</code></div></div></td></tr></tbody></table></div></div>

<p>When you run the program, the produced window should look like in the
 figure below. While this is not really visible, every time you resize 
the window, the <em>paintEvent(…)</em> method of GeometryDrawingWidget 
will be called and the content consisting of the three geometric objects
 will be redrawn. While in this simple widget, we only use fixed 
absolute coordinates so that the drawn content is independent of the 
size of the widget, one could easily implement some logic that would 
scale the drawing based on the available space.</p>

<div class="img-center"><img alt="shapes in the left hand corner. Pink rectangle above a blue square. Both are intersected by a green circle" src="4.9%20Inheritance%20in%20GUI%20Programming_arquivos/geometries.jpg"> &nbsp; &nbsp; &nbsp;
	<div class="img-caption">Figure 4.20 Window produced by the previous code example with the drawings of the different geometric objects</div>
</div>
</div></div></div>  </div>
</div>
</div>
    <div class="print-footer">
</div>
    <hr class="print-hr">
          <div class="print-source_url">
        <strong>Source URL:</strong> https://www.e-education.psu.edu/geog489/node/2306      </div>
        <div class="print-links"><p><strong>Links</strong><br>[1] http://www.kuqin.com/qtdocument/classchart.html<br>
[2] http://pyqt.sourceforge.net/Docs/PyQt4/qpainter.html<br>
[3] http://pyqt.sourceforge.net/Docs/PyQt4/qpen.html<br>
[4] http://pyqt.sourceforge.net/Docs/PyQt4/qbrush.html<br>
</p></div>
    <script type="text/javascript" src="4.9%20Inheritance%20in%20GUI%20Programming_arquivos/syntaxhighlighter.js"></script>
  

</body></html>